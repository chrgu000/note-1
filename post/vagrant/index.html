<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vagrant常用命令</title>
<meta name="description" content=" John Doe&#39;s Personal blog about everything">
<meta name="generator" content="Hugo 0.17" />
<meta property="og:title" content="Vagrant常用命令" />
<meta property="og:description" content="Vagrant常用命令  添加box bash #到vagrant所在目录 cd D:\vagrant\CentOS # vagrant box add ubuntu-14.04 trusty-server-cloudimg-amd64-vagrant-disk1.box  初始化 cmd #打开目录 cd D:\vagrant\work #如果你添加的box名称不是base，那么需要在初始化的时候指定名称，例如 vagrant init ubuntu14.04  启动虚拟机  vagrant up  ssh到虚拟机  vagrant ssh  重启虚拟机（重新载入配置文件）  vagrant reload  打包分发  vagrant package   Vagrantfile  配置文件 ruby Vagrant.configure(2) do |config| config.vm.define &quot;u1&quot; do |u1| u1.vm.box = &quot;ubuntu-14.04-1&quot; u1.vm.hostname = &quot;u1&quot; u1.vm.network &quot;private_network&quot;, ip: &quot;192.168.137.11&quot; end config.vm.define &quot;u2&quot; do |u2| u2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://dishui.oschina.io/hugo-html/post/vagrant/" />


<meta property="og:updated_time" content="2017-01-01T00:00:00&#43;00:00"/>











<link rel="stylesheet" href="http://dishui.oschina.io/hugo-htmlcss/google-font.css?family=Open+Sans:400,400italic,700,600" type="text/css" media="all" />
<link rel="stylesheet" href="http://dishui.oschina.io/hugo-htmlcss/atom-one-dark.css">
<link rel="stylesheet" href="http://dishui.oschina.io/hugo-htmlcss/style.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://dishui.oschina.io/hugo-htmlcss/custom.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://dishui.oschina.io/hugo-htmlcss/jquery.bigautocomplete.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://dishui.oschina.io/hugo-htmlcss/jquery.tocify.css" type="text/css" media="all" />
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/fonts/fontawesome-webfont.svg" rel="stylesheet">

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script type="text/javascript" src="http://dishui.oschina.io/hugo-htmljs/scripts.js"></script>
<!--[if lt IE 9]>
	<script src="http://dishui.oschina.io/hugo-htmljs/css3-mediaqueries.js"></script>
<![endif]-->

<script data-main="http://dishui.oschina.io/hugo-htmljs/app.js" src="http://dishui.oschina.io/hugo-htmljs/require.js"></script>

</head>
<body id="mr-mobile" class="home blog mr-right-sb" itemscope="itemscope" itemtype="http://schema.org/WebPage">
	<div class="mr-container mr-container-outer">
		<div class="mr-header-mobile-nav clearfix"></div>
			<header class="mr-header" itemscope="itemscope" itemtype="http://schema.org/WPHeader">
				<div class="mr-container mr-container-inner mr-row clearfix">
					<div class="mr-custom-header clearfix">
						<div class="mr-site-identity">
							<div class="mr-site-logo" role="banner" itemscope="itemscope" itemtype="http://schema.org/Brand">
								<div class="mr-header-text">
									<a class="mr-header-text-link" href="http://dishui.oschina.io/hugo-html" title="工作笔记" rel="home">
										<h1 class="mr-header-title">工作笔记</h1>
										<h2 class="mr-header-tagline">点滴记录</h2>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="mr-main-nav-wrap">
					<nav class="menu" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
	<ul class="menu__list">
		
	</ul>
</nav>
				</div>
			</header>
		<div class="mr-wrapper clearfix">


<div class="mr-content" id="main-content" role="main" itemprop="mainContentOfPage">
	<article class="post">
		<header class="entry-header clearfix">
			<h1 class="entry-title">Vagrant常用命令</h1>
			<p class="mr-meta entry-meta">
				<svg class="icon icon-time" height="14" viewBox="0 0 16 16" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m8-.0000003c-4.4 0-8 3.6-8 8 0 4.4000003 3.6 8.0000003 8 8.0000003 4.4 0 8-3.6 8-8.0000003 0-4.4-3.6-8-8-8zm0 14.4000003c-3.52 0-6.4-2.88-6.4-6.4000003 0-3.52 2.88-6.4 6.4-6.4 3.52 0 6.4 2.88 6.4 6.4 0 3.5200003-2.88 6.4000003-6.4 6.4000003zm.4-10.4000003h-1.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg>
				<time class="entry-meta-date updated" datetime="2017-01-01 00:00:00 &#43;0000 UTC">January 01, 2017</time>
			</p>
		</header>
		<div class="entry-content clearfix">
			
			

<h3 id="vagrant常用命令">Vagrant常用命令</h3>

<ol>
<li>添加box
<code>bash
#到vagrant所在目录
cd D:\vagrant\CentOS
#
vagrant box add ubuntu-14.04 trusty-server-cloudimg-amd64-vagrant-disk1.box
</code></li>
<li>初始化
<code>cmd
#打开目录
cd D:\vagrant\work
#如果你添加的box名称不是base，那么需要在初始化的时候指定名称，例如
vagrant init ubuntu14.04
</code></li>
<li>启动虚拟机
<code>
vagrant up
</code></li>
<li>ssh到虚拟机
<code>
vagrant ssh
</code></li>
<li>重启虚拟机（重新载入配置文件）
<code>
vagrant reload
</code></li>
<li>打包分发
<code>
vagrant package
</code></li>
</ol>

<h3 id="vagrantfile">Vagrantfile</h3>

<ol>
<li>配置文件
<code>ruby
Vagrant.configure(2) do |config|
config.vm.define &quot;u1&quot; do |u1|
u1.vm.box = &quot;ubuntu-14.04-1&quot;
u1.vm.hostname = &quot;u1&quot;
u1.vm.network &quot;private_network&quot;, ip: &quot;192.168.137.11&quot;
end
config.vm.define &quot;u2&quot; do |u2|
u2.vm.box = &quot;ubuntu-14.04-1&quot;
u2.vm.hostname = &quot;u2&quot;
u2.vm.network &quot;private_network&quot;, ip: &quot;192.168.137.22&quot;
end
config.vm.provider &quot;virtualbox&quot; do |vb|
vb.memory = &quot;1768&quot;
end
end
</code></li>
<li>命令
<code>
#xshell 连接
ssh vagrant@127.0.0.1 2222
</code></li>

<li><p><code>Issuse</code></p>

<pre><code># &quot;rsync&quot; could not be found on your PATH. Make sure that rsync
#关闭 sync
config.vm.synced_folder '.', '/home/vagrant/sync', disabled: true
</code></pre></li>
</ol>

<h4 id="vagrant-issues">Vagrant issues</h4>

<ul>
<li><strong>ssh Time-out</strong>
<code>bash
#添加vagrant 用户用户组
groupadd vagrant
useradd -g vagrant vagrant
mkdir -pv /home/vagrant
#
cd /home/vagrant
#
wget https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub -O .ssh/authorized_keys --no-check-certificate
#授权
sudo -u vagrant chmod 700 .ssh
sudo -u vagrant chmod 600 .ssh/authorized_keys
sudo -u vagrant chown -R vagrant:vagrant .ssh
</code></li>
</ul>

<p>If you look above, you should be able to see the error(s) that
Vagrant had when attempting to connect to the machine. These errors
are usually good hints as to what may be wrong.</p>

<p>If you&rsquo;re using a custom box, make sure that networking is properly
working and you&rsquo;re able to connect to the machine. It is a common
problem that networking isn&rsquo;t setup properly in these boxes.
Verify that authentication configurations are also setup properly,
as well.</p>

		</div>
		
<div class="entry-tags clearfix">
	<svg class="icon icon-tag" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m4.73135 3.3795002q0-.5597-.39604-.9557-.39604-.3961-.95577-.3961-.55974 0-.95578.3961-.39604.396-.39604.9557 0 .5598.39604.9558.39604.3961.95578.3961.55973 0 .95577-.3961.39604-.396.39604-.9558zm11.26865 6.0832q0 .5596998-.39076.9504998l-5.18548 5.196q-.41188.3908-.9610504.3908-.55974 0-.9505-.3908l-7.5511496-7.5616998q-.40132-.3907-.68119-1.0666-.27987-.6759-.27987-1.2357v-4.3934q0-.54920004.40132-.95050004.40132-.4013.9505-.4013h4.39339q.55974 0 1.23565.2799.67591.2798 1.07723.6812l7.55115 7.54060004q.39076.4118.39076.961z"/></svg>
	<ul>
		<li><a href="/tags/vagrant/" rel="tag">vagrant</a></li>
		
	</ul>
</div>
	</article>
	
<div class="mr-author-box clearfix">
	<figure class="mr-author-box-avatar">
		<img alt="dishui avatar" src="http://dishui.oschina.io/hugo-html/src/img/dishui.png" class="avatar avatar-90 photo" height="90" width="90">
	</figure>
	<div class="mr-author-box-header">
		<span class="mr-author-box-name">About dishui</span>
	</div>
	<div class="mr-author-box-bio">
		辛勤的搬运工!!!
	</div>
</div>

	

	<nav class="mr-post-nav mr-row clearfix" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
		
		<div class="mr-col-1-2 mr-post-nav-item mr-post-nav-prev">
			<a href="http://dishui.oschina.io/hugo-html/post/mvcxml_md/" rel="prev"><span>«Previous</span><p>SpringMVC</p></a>
		</div>
		
		
		<div class="mr-col-1-2 mr-post-nav-item mr-post-nav-next">
			<a href="http://dishui.oschina.io/hugo-html/post/linux/alpine/" rel="next"><span>Next»</span><p>alpine</p></a>
		</div>
		
	</nav>


	
</div>

<aside class="mr-sidebar" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">
<div class="mr-widget widget_search navbar-wrapper" >
    <form class="search-form" role="search" >
        <label>
            <span class="screen-reader-text">Search for:</span>
            <input id="lanren" type="search" class="search-field" placeholder="Search..." value="" name="q">
        </label>
        <div id="list-container" class="bdsug" style="height: auto; display: block;">
        </div>
    </form>
    <div id="side-toc" class="entry-content">
    
    </div>
</div>
</aside>
	</div>
		<div class="mr-copyright-wrap">
			<div class="mr-container mr-container-inner clearfix">
				<p class="mr-copyright">&copy; 2017 工作笔记. Based on <a href="//wordpress.org/themes/mh-magazine-lite/" target="_blank" rel="nofollow noopener noreferrer">MH Magazine lite</a>.</p>
			</div>
		</div>
	</div>

<script>
	var navigation = responsiveNav(".menu", {
		navClass: "menu--collapse",
	});
</script>



</body>
</html>