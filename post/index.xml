<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Post-rsses on 零零碎碎</title>
    <link>/post/index.xml</link>
    <description>Recent content in Post-rsses on 零零碎碎</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Wed, 01 Aug 2018 10:28:36 +0000</lastBuildDate>
    <atom:link href="/post/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>DO工具箱开发</title>
      <link>/post/work/nokia/nokia/</link>
      <pubDate>Wed, 01 Aug 2018 10:28:36 +0000</pubDate>
      
      <guid>/post/work/nokia/nokia/</guid>
      <description>&lt;div id=&#34;toc&#34; class=&#34;toc&#34;&gt;
&lt;div id=&#34;toctitle&#34;&gt;DO工具箱&lt;/div&gt;
&lt;ul class=&#34;sectlevel1&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_osgi&#34;&gt;1. OSGi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_配置&#34;&gt;2. 配置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_指标呈现&#34;&gt;3. 指标呈现&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_指标呈现_天&#34;&gt;4. 指标呈现(天)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_定界定位&#34;&gt;5. 定界定位&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_osgi&#34;&gt;1. OSGi&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Toolbox 工具箱&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;工具箱的安装、开发及使用。时间充足的话再把消息队列详细说说。最好能让他参于到你的项目中，&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;基于spark sql&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;1, sql语句封装在xml里
 source：
   数据源&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;summary:
  处理逻辑&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;result:
  输出结果&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_配置&#34;&gt;2. 配置&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;listingblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre class=&#34;highlightjs highlight&#34;&gt;&lt;code&gt;datasources=hdfs,hive

hdfs.source-type=HDFS-NORMAL
hdfs.type=HDFS
hdfs.title=HDFS for CMDI
hdfs.arg.location=hdfs://vm26:8020/zhoukai/output

hive.source-type=HIVE-NORMAL
hive.type=HIVE
hive.title=Hive for CMDI
hive.arg.database=result
hive.arg.location=/output/zhoukai/result

runtime.spark.submit=/usr/bin/spark-submit&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;输入:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;输出
StreamSource：
  HiveStreamSource
  HDFSStreamSource&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;dlist&#34;&gt;
&lt;dl&gt;
&lt;dt class=&#34;hdlist1&#34;&gt;插件开发 &lt;/dt&gt;
&lt;dd&gt;
&lt;div class=&#34;olist arabic&#34;&gt;
&lt;ol class=&#34;arabic&#34;&gt;
&lt;li&gt;
&lt;p&gt;Bundle-SymbolicName&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Bundle-Activator&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Require-Bundle&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;--master yarn --name new_d_user_details30 --deploy-mode cluster --driver-memory 10G --driver-cores 2 --executor-memory 12G --executor-cores 2 --num-executors 20 --conf spark.dynamicAllocation.enabled=false --conf spark.yarn.executor.memoryOverhead=4G&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_指标呈现&#34;&gt;3. 指标呈现&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/nokia-1.svg&#34; alt=&#34;nokia 1&#34; width=&#34;2570&#34; height=&#34;1971&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_指标呈现_天&#34;&gt;4. 指标呈现(天)&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/nokia-2.svg&#34; alt=&#34;nokia 2&#34; width=&#34;1988&#34; height=&#34;1877&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_定界定位&#34;&gt;5. 定界定位&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/nokia-3.svg&#34; alt=&#34;nokia 3&#34; width=&#34;1328&#34; height=&#34;1322&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>SparkSql</title>
      <link>/post/work/dayliy/2018-07-09/</link>
      <pubDate>Thu, 19 Jul 2018 14:43:47 +0000</pubDate>
      
      <guid>/post/work/dayliy/2018-07-09/</guid>
      <description>&lt;div id=&#34;toc&#34; class=&#34;toc&#34;&gt;
&lt;div id=&#34;toctitle&#34;&gt;stream&lt;/div&gt;
&lt;ul class=&#34;sectlevel1&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_tmp&#34;&gt;1. tmp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_tmp&#34;&gt;1. tmp&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;asdfjlj&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/2018-07-02-1.png&#34; alt=&#34;2018 07 02 1&#34; width=&#34;317&#34; height=&#34;949&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>SparkSql</title>
      <link>/post/work/dayliy/2018-07-18/</link>
      <pubDate>Wed, 18 Jul 2018 14:43:47 +0000</pubDate>
      
      <guid>/post/work/dayliy/2018-07-18/</guid>
      <description>&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;xxxxx
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;    &amp;lt;result id=&amp;quot;VD_NAT_H&amp;quot; for=&amp;quot;NAT_H_SUMMARY&amp;quot; to=&amp;quot;hive&amp;quot; title=&amp;quot;spark1&amp;quot;/&amp;gt;
    &amp;lt;result id=&amp;quot;VD_PROV_VENDOR_AREA_H&amp;quot; for=&amp;quot;PROV_VENDOR_AREA_H_SUMMARY&amp;quot; to=&amp;quot;hive&amp;quot; title=&amp;quot;spark1&amp;quot;/&amp;gt;
    &amp;lt;result id=&amp;quot;VD_PROV_VENDOR_H&amp;quot; for=&amp;quot;PROV_VENDOR_H_SUMMARY&amp;quot; to=&amp;quot;hive&amp;quot; title=&amp;quot;spark1&amp;quot;/&amp;gt;
    &amp;lt;result id=&amp;quot;VD_PROV_AREA_H&amp;quot; for=&amp;quot;PROV_AREA_H_SUMMARY&amp;quot; to=&amp;quot;hive&amp;quot; title=&amp;quot;spark1&amp;quot;/&amp;gt;
    &amp;lt;result id=&amp;quot;VD_PROV_H&amp;quot; for=&amp;quot;PROV_H_SUMMARY&amp;quot; to=&amp;quot;hive&amp;quot; title=&amp;quot;spark1&amp;quot;/&amp;gt;
    &amp;lt;result id=&amp;quot;VD_CITY_VENDOR_AREA_H&amp;quot; for=&amp;quot;CITY_VENDOR_AREA_H_SUMMARY&amp;quot; to=&amp;quot;hive&amp;quot; title=&amp;quot;spark1&amp;quot;/&amp;gt;
    &amp;lt;result id=&amp;quot;VD_CITY_VENDOR_H&amp;quot; for=&amp;quot;CITY_VENDOR_H_SUMMARY&amp;quot; to=&amp;quot;hive&amp;quot; title=&amp;quot;spark1&amp;quot;/&amp;gt;
    &amp;lt;result id=&amp;quot;VD_CITY_AREA_H&amp;quot; for=&amp;quot;CITY_AREA_H_SUMMARY&amp;quot; to=&amp;quot;hive&amp;quot; title=&amp;quot;spark1&amp;quot;/&amp;gt;
    &amp;lt;result id=&amp;quot;VD_CITY_H&amp;quot; for=&amp;quot;CITY_H_SUMMARY&amp;quot; to=&amp;quot;hive&amp;quot; title=&amp;quot;spark1&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>数据采集与同步</title>
      <link>/post/bigdata/bigdata-warehouse/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E4%B8%8E%E5%90%8C%E6%AD%A5/</link>
      <pubDate>Mon, 02 Jul 2018 14:20:43 +0000</pubDate>
      
      <guid>/post/bigdata/bigdata-warehouse/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E4%B8%8E%E5%90%8C%E6%AD%A5/</guid>
      <description>&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;select
  timestamp,
  cid,
  tb.uid,
  sessionId,
  ipAddress,
  page,
  ctype,
  type,
  event,
  useragent,
  version,
  content,
  lead(timestamp) over (partition by cid,sessionid order by timestamp asc) as next_time
from b_event_trace_i where dt=&#39;&#39; and envent=&#39;pageview&#39;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>spark-问题</title>
      <link>/post/bigdata/spark/spark-%E9%97%AE%E9%A2%98/</link>
      <pubDate>Wed, 20 Jun 2018 10:49:12 +0000</pubDate>
      
      <guid>/post/bigdata/spark/spark-%E9%97%AE%E9%A2%98/</guid>
      <description>&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;有一个表中，有200+字段 然后我要分别统计每个字段的 空值和非空值的分布情况。  这个表一天的数据大概有24T  目前打算抽样一千万条数据。 想用透视表来做 哪位大神指导一下，要是用spark 的话 怎么写&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Scala g8 模板</title>
      <link>/post/bigdata/scala/g8/</link>
      <pubDate>Sat, 14 Apr 2018 21:33:54 +0000</pubDate>
      
      <guid>/post/bigdata/scala/g8/</guid>
      <description>&lt;div id=&#34;toc&#34; class=&#34;toc&#34;&gt;
&lt;div id=&#34;toctitle&#34;&gt;g8模板&lt;/div&gt;
&lt;ul class=&#34;sectlevel0&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_本地&#34;&gt;本地&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker pull moredip/giter8&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run --volume-driver=cifs -v 192.168.137.1/scala/g8out:/g8out moredip/giter8 foundweekends/giter8.g8 --name=my-new-website&lt;/p&gt;
&lt;/div&gt;
&lt;h1 id=&#34;_本地&#34; class=&#34;sect0&#34;&gt;本地&lt;/h1&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run --volume-driver=cifs -v 192.168.137.1/scala/g8out:/g8out -v 192.168.137.1/scala/g8:/g8 moredip/giter8 &lt;a href=&#34;file:///g8/spark-mvn.g8/&#34; class=&#34;bare&#34;&gt;file:///g8/spark-mvn.g8/&lt;/a&gt; --name=spark-mvn&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run --volume-driver=cifs -v 192.168.137.1/scala/g8out:/g8out -v 192.168.137.1/scala/g8:/g8 moredip/giter8 &lt;a href=&#34;file:///g8/java-scala-mvn.g8/&#34; class=&#34;bare&#34;&gt;file:///g8/java-scala-mvn.g8/&lt;/a&gt; --name=my-mvn-1&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run --volume-driver=cifs -v 192.168.137.1/scala/g8out:/g8out -v 192.168.137.1/scala/g8:/g8 moredip/giter8 &lt;a href=&#34;file:///g8/com-nsn-do.g8/&#34; class=&#34;bare&#34;&gt;file:///g8/com-nsn-do.g8/&lt;/a&gt; --name=com.nsn.messages.t1&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run --volume-driver=cifs -v 192.168.137.1/scala/g8out:/g8out -v 192.168.137.1/scala/g8:/g8 moredip/giter8 &lt;a href=&#34;file:///g8/com-nsn-do.g8/&#34; class=&#34;bare&#34;&gt;file:///g8/com-nsn-do.g8/&lt;/a&gt; --name=com.nsn.do.tbox.spark.kpi.cucwm&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run -v /root/tmp/g8out:/g8out -v /root/tmp/g8:/g8 moredip/giter8 &lt;a href=&#34;file:///g8/com-nsn-do.g8/&#34; class=&#34;bare&#34;&gt;file:///g8/com-nsn-do.g8/&lt;/a&gt; --name=com.nsn.do.tbox.spark.kpi.cucwm&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run -v /root/tmp/g8out:/g8out -v /root/tmp/g8:/g8 moredip/giter8 &lt;a href=&#34;file:///g8/com-nsn-do-web.g8/&#34; class=&#34;bare&#34;&gt;file:///g8/com-nsn-do-web.g8/&lt;/a&gt; --name=com.nsn.web.do.tbox.spark.kpi.cucwm2&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>graphviz</title>
      <link>/post/work/dayliy/graphviz/</link>
      <pubDate>Sat, 14 Apr 2018 21:33:54 +0000</pubDate>
      
      <guid>/post/work/dayliy/graphviz/</guid>
      <description>&lt;div id=&#34;toc&#34; class=&#34;toc&#34;&gt;
&lt;div id=&#34;toctitle&#34;&gt;graphviz&lt;/div&gt;
&lt;ul class=&#34;sectlevel1&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_4&#34;&gt;1. graphviz-4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_5&#34;&gt;2. graphviz-5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_6&#34;&gt;3. graphviz-6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_7&#34;&gt;4. graphviz-7&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_3_17_53_1&#34;&gt;5. 3.17.53-1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_监控_hdfs_文件_触发消息&#34;&gt;6. 监控 hdfs 文件,触发消息&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_8&#34;&gt;7. graphviz-8&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_9&#34;&gt;8. graphviz-9&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_10&#34;&gt;9. graphviz-10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_11&#34;&gt;10. graphviz-11&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_12&#34;&gt;11. graphviz-12&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_13&#34;&gt;12. graphviz-13&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_14&#34;&gt;13. graphviz-14&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_graphviz_15&#34;&gt;14. graphviz-15&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_erd&#34;&gt;Erd&lt;/a&gt;
&lt;ul class=&#34;sectlevel1&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_erd_1&#34;&gt;1. Erd 1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-1.svg&#34; alt=&#34;graphviz 1&#34; width=&#34;541&#34; height=&#34;170&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-2.svg&#34; alt=&#34;graphviz 2&#34; width=&#34;968&#34; height=&#34;315&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-3.svg&#34; alt=&#34;graphviz 3&#34; width=&#34;178&#34; height=&#34;154&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_4&#34;&gt;1. graphviz-4&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-4.svg&#34; alt=&#34;graphviz 4&#34; width=&#34;715&#34; height=&#34;543&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_5&#34;&gt;2. graphviz-5&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-5.svg&#34; alt=&#34;graphviz 5&#34; width=&#34;215&#34; height=&#34;155&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_6&#34;&gt;3. graphviz-6&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-6.svg&#34; alt=&#34;graphviz 6&#34; width=&#34;413&#34; height=&#34;204&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_7&#34;&gt;4. graphviz-7&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_3_17_53_1&#34;&gt;5. 3.17.53-1&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/3.17.53-1.svg&#34; alt=&#34;3.17.53 1&#34; width=&#34;2133&#34; height=&#34;442&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/3.17.53-1-1.svg&#34; alt=&#34;3.17.53 1 1&#34; width=&#34;1141&#34; height=&#34;97&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/3.17.53-1-2.svg&#34; alt=&#34;3.17.53 1 2&#34; width=&#34;1034&#34; height=&#34;264&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_监控_hdfs_文件_触发消息&#34;&gt;6. 监控 hdfs 文件,触发消息&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/3.17.53-2.svg&#34; alt=&#34;3.17.53 2&#34; width=&#34;824&#34; height=&#34;534&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_8&#34;&gt;7. graphviz-8&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_9&#34;&gt;8. graphviz-9&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-9.svg&#34; alt=&#34;graphviz 9&#34; width=&#34;3890&#34; height=&#34;3888&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_10&#34;&gt;9. graphviz-10&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-10.svg&#34; alt=&#34;graphviz 10&#34; width=&#34;449&#34; height=&#34;345&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_11&#34;&gt;10. graphviz-11&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-11.svg&#34; alt=&#34;graphviz 11&#34; width=&#34;178&#34; height=&#34;174&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_12&#34;&gt;11. graphviz-12&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-12.svg&#34; alt=&#34;graphviz 12&#34; width=&#34;425&#34; height=&#34;331&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_13&#34;&gt;12. graphviz-13&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-13.svg&#34; alt=&#34;graphviz 13&#34; width=&#34;441&#34; height=&#34;325&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_14&#34;&gt;13. graphviz-14&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-14.svg&#34; alt=&#34;graphviz 14&#34; width=&#34;535&#34; height=&#34;574&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_graphviz_15&#34;&gt;14. graphviz-15&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/graphviz-15.svg&#34; alt=&#34;graphviz 15&#34; width=&#34;264&#34; height=&#34;228&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h1 id=&#34;_erd&#34; class=&#34;sect0&#34;&gt;Erd&lt;/h1&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_erd_1&#34;&gt;1. Erd 1&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/erd-graphvi-1.svg&#34; alt=&#34;erd graphvi 1&#34; width=&#34;554&#34; height=&#34;417&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>yunnan-lt</title>
      <link>/post/work/nokia/yunnan-lt/yunnan-lt/</link>
      <pubDate>Sat, 14 Apr 2018 21:33:54 +0000</pubDate>
      
      <guid>/post/work/nokia/yunnan-lt/yunnan-lt/</guid>
      <description>&lt;div id=&#34;toc&#34; class=&#34;toc&#34;&gt;
&lt;div id=&#34;toctitle&#34;&gt;yunnan-lt&lt;/div&gt;
&lt;ul class=&#34;sectlevel1&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_多sheet保存csv&#34;&gt;1. 多sheet保存csv&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_代办&#34;&gt;2. 代办&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_问题&#34;&gt;3. 问题&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_er&#34;&gt;4. ER&lt;/a&gt;
&lt;ul class=&#34;sectlevel2&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_云南联通中间表小时&#34;&gt;4.1. 云南联通中间表小时&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_云南联通中间表天&#34;&gt;4.2. 云南联通中间表天&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;服务器信息&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;172.33.2.17
yarn &lt;a href=&#34;http://172.33.2.17:23188/cluster&#34; class=&#34;bare&#34;&gt;http://172.33.2.17:23188/cluster&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;172.33.2.17
root/Huawei@123&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;su - hadoop&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;hadoop fs -ls /lte/xdr&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;web
  172.33.10.51&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;MRO数据源表
O_LTE_MRO_IMSI&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;MRS数据源表
O_LTE_MRS_RSRP
O_LTE_MRS_RSRQ
O_LTE_MRS_TADV
O_LTE_MRS_POWERHEADROOM
O_LTE_MRS_AOA
O_LTE_MRS_SINRUL
O_LTE_MRS_RECEIVEDIPOWER
O_LTE_MRS_RIPPRB
O_LTE_MRS_TADVRSRP
O_LTE_MRS_TADVAOA
O_LTE_MRS_RIPRSRP
O_LTE_MRS_RIPRSRQ
O_LTE_MRS_SINRULRIP
O_LTE_MRS_PACKETLOSSRATEULQCI1
O_LTE_MRS_PACKETLOSSRATEULQCI2
O_LTE_MRS_PACKETLOSSRATEULQCI3
O_LTE_MRS_PACKETLOSSRATEULQCI4
O_LTE_MRS_PACKETLOSSRATEULQCI5
O_LTE_MRS_PACKETLOSSRATEULQCI6
O_LTE_MRS_PACKETLOSSRATEULQCI7
O_LTE_MRS_PACKETLOSSRATEULQCI8
O_LTE_MRS_PACKETLOSSRATEULQCI9
O_LTE_MRS_PACKETLOSSRATEDLQCI1
O_LTE_MRS_PACKETLOSSRATEDLQCI2
O_LTE_MRS_PACKETLOSSRATEDLQCI3
O_LTE_MRS_PACKETLOSSRATEDLQCI4
O_LTE_MRS_PACKETLOSSRATEDLQCI5
O_LTE_MRS_PACKETLOSSRATEDLQCI6
O_LTE_MRS_PACKETLOSSRATEDLQCI7
O_LTE_MRS_PACKETLOSSRATEDLQCI8
O_LTE_MRS_PACKETLOSSRATEDLQCI9&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_多sheet保存csv&#34;&gt;1. 多sheet保存csv&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Sub SaveToCSVs()&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Dim fDir As String&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Dim wB As Workbook&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Dim wS As Worksheet&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Dim fPath As String&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Dim sPath As String&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;fPath = &#34;C:\Users\dishui\Desktop\liantong-km\doc\&#34;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;sPath = &#34;C:\Users\dishui\Desktop\liantong-km\csv3\&#34;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;fDir = Dir(fPath)&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Do While (fDir &amp;lt;&amp;gt; &#34;&#34;)&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;If Right(fDir, 4) = &#34;.xls&#34; Or Right(fDir, 5) = &#34;.xlsx&#34; Then&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;On Error Resume Next&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Set wB = Workbooks.Open(fPath &amp;amp; fDir)&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;&#39;MsgBox (wB.Name)&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;For Each wS In wB.Sheets&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;wS.SaveAs sPath &amp;amp; wS.Name &amp;amp; &#34;.csv&#34;, xlCSV&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Next wS&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;wB.Close False&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Set wB = Nothing&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;End If&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;fDir = Dir&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;On Error GoTo 0&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Loop&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;End Sub&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;s1u业务       &amp;#8592;   s1u_rpt业务
s1u_dns业务       &amp;#8592;   s1u_dns_rpt业务
s1u_http业务      &amp;#8592;   s1u_http_rpt业务
s1u_mme业务       &amp;#8592;   s1u_mme_rpt业务&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;s1u_rpt业务
s1u_dns_rpt业务
s1u_http_rpt业务
s1u_mme_rpt业务&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;算法设计器 (天级别的)
    凌晨的&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;customer_group业务
    定时 每个小时执行一次&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;customer_group_first业务
    跑一个小时的 执行一次&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;customer_group_daily业务&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;问题&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;2018年6月24日
1. O_LTE_RPM_EUTRANCELL源表没有&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;STARTTIME
  O_LTE_RPM_EUTRANCELL
    DAY_ID+HOUR_ID
格式 yyyy-MM-dd hh:mm:ss&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;M_PM_LTE_CELL_H
  HOPREPINCSUCCRATE 重复
  AVAILCELLRATIO 根据什么分组  eci&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;O_AM
  scity&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_代办&#34;&gt;2. 代办&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;p_rmconf
  2:当EquipmentClass为EUTRANCELL时，取NeName与P_netconf表cell_oid字段相匹配，获取CELL_ID。同时通过NeName与O_RM_EUTRANCELL的NMS_ORIG_RES_NAME字段匹配获取STARTTIME。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;com.nsn.do.tbox.spark.kpi.cucwm
com.nsn.do.tbox.spark.kpi.cucmr
com.nsn.do.tbox.spark.kpi.cucmr.day
com.nsn.do.tbox.spark.kpi.cucwm.day
com.nsn.web.do.tbox.spark.kpi.cucmr
com.nsn.web.do.tbox.spark.kpi.cucwm&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_问题&#34;&gt;3. 问题&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;listingblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;云南联通汇总表(day)V3.1.1表
S_MRO_LTE_RSRP_D 问题

18行
  某小区，SumPRRP/timeRSRP-140

35行
  某小区，(sum(RSRP_ALL)-sum(RSRP_110))/sum((RSRP_ALL)&amp;gt;10,and (sum(RSRP_ALL))&amp;gt;1000,1,0)


p_rmconf.xlsx
2行
  不同网元用各自网元的START_TIME
  O_RM_ENDEB
  O_RM_EUTRANCELL
  O_RM_HSS_FE
  O_RM_MME
  O_RM_PGW
  O_RM_SGW&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_er&#34;&gt;4. ER&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;sect2&#34;&gt;
&lt;h3 id=&#34;_云南联通中间表小时&#34;&gt;4.1. 云南联通中间表小时&lt;/h3&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/yunnan-lt-1.svg&#34; alt=&#34;yunnan lt 1&#34; width=&#34;931&#34; height=&#34;1189&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect2&#34;&gt;
&lt;h3 id=&#34;_云南联通中间表天&#34;&gt;4.2. 云南联通中间表天&lt;/h3&gt;
&lt;div class=&#34;listingblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;Failed to generate image: erd.EXE failed: &#34;&amp;lt;stdin&amp;gt;&#34; (line 5, column 8):
unexpected &#39;(&#39;
expecting relationship or attribute

title {label: &#34;云南联通中间表天&#34;, size: &#34;13&#34;}
# Entities

[S_MRO_LTE_RSRP_D] {bgcolor: &#34;#d0e0d0&#34;, size: &#34;12&#34;}
   邻区MR(天)
[S_MRS_LTE_RSRP_D] {bgcolor: &#34;#d0e0d0&#34;, size: &#34;12&#34;}
   服务小区MR(天)
[S_MRS_LTE_IOT_D] {bgcolor: &#34;#d0e0d0&#34;, size: &#34;12&#34;}
   小区干扰(天)
[S_PM_LTE_CELL_D] {bgcolor: &#34;#d0e0d0&#34;, size: &#34;12&#34;}
   小区级KPI指标(天)
[S_PM_LTE_SCITY_D] {bgcolor: &#34;#d0e0d0&#34;, size: &#34;12&#34;}
   地市级KPI指标(天)

# Relationships&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/yunnan-lt-3.svg&#34; alt=&#34;yunnan lt 3&#34; width=&#34;509&#34; height=&#34;422&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>初级1</title>
      <link>/post/niuke/%E5%88%9D%E7%BA%A71/</link>
      <pubDate>Sat, 14 Apr 2018 21:33:54 +0000</pubDate>
      
      <guid>/post/niuke/%E5%88%9D%E7%BA%A71/</guid>
      <description>&lt;div id=&#34;toc&#34; class=&#34;toc&#34;&gt;
&lt;div id=&#34;toctitle&#34;&gt;&lt;/div&gt;
&lt;ul class=&#34;sectlevel0&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_对数器&#34;&gt;对数器&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;preamble&#34;&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;二分查找的时间复杂度 \(O(\log{_2} N)\)&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h1 id=&#34;_对数器&#34; class=&#34;sect0&#34;&gt;对数器&lt;/h1&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;贪心策略&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>大数据仓库构建-实体关系（ER）建模理论及应用场景案例1维度建模理论及应用场景案例1</title>
      <link>/post/bigdata/bigdata-warehouse/er/</link>
      <pubDate>Sat, 14 Apr 2018 21:33:54 +0000</pubDate>
      
      <guid>/post/bigdata/bigdata-warehouse/er/</guid>
      <description>&lt;div id=&#34;toc&#34; class=&#34;toc&#34;&gt;
&lt;div id=&#34;toctitle&#34;&gt;er&lt;/div&gt;
&lt;ul class=&#34;sectlevel1&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_1&#34;&gt;1. 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_data_vauit建模例子&#34;&gt;2. Data VauIt建模例子&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_1&#34;&gt;1. 1&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/dw-erd-1.svg&#34; alt=&#34;dw erd 1&#34; width=&#34;1876&#34; height=&#34;853&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/dw-erd-2.svg&#34; alt=&#34;dw erd 2&#34; width=&#34;625&#34; height=&#34;521&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_data_vauit建模例子&#34;&gt;2. Data VauIt建模例子&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;imageblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;img src=&#34;/src/img/plantuml/dw-erd-3.svg&#34; alt=&#34;dw erd 3&#34; width=&#34;587&#34; height=&#34;486&#34;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Ambari</title>
      <link>/post/bigdata/ambari/</link>
      <pubDate>Sat, 10 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/bigdata/ambari/</guid>
      <description>&lt;div id=&#34;toc&#34; class=&#34;toc&#34;&gt;
&lt;div id=&#34;toctitle&#34;&gt;Ambari&lt;/div&gt;
&lt;ul class=&#34;sectlevel1&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_ambari&#34;&gt;1. Ambari&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_参考&#34;&gt;2. 参考&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_ambari动态添加删除节点&#34;&gt;3. ambari动态添加删除节点&lt;/a&gt;
&lt;ul class=&#34;sectlevel2&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_下线节点&#34;&gt;3.1. 下线节点&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_上线节点&#34;&gt;3.2. 上线节点&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_ambari&#34;&gt;1. Ambari&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;curl -o /etc/yum.repos.d/CentOS-Base.repo &lt;a href=&#34;http://mirrors.aliyun.com/repo/Centos-7.repo&#34; class=&#34;bare&#34;&gt;http://mirrors.aliyun.com/repo/Centos-7.repo&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;curl -o  /etc/yum.repos.d/ambari.repo &lt;a href=&#34;http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.6.1.0/ambari.repo&#34; class=&#34;bare&#34;&gt;http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.6.1.0/ambari.repo&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;curl -o  /etc/yum.repos.d/ambari.repo &lt;a href=&#34;http://192.168.137.123/ambari/centos7/2.6.1.3-3/ambari.repo&#34; class=&#34;bare&#34;&gt;http://192.168.137.123/ambari/centos7/2.6.1.3-3/ambari.repo&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&lt;a href=&#34;http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.6.1.3/ambari.repo&#34; class=&#34;bare&#34;&gt;http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.6.1.3/ambari.repo&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;curl -o  /etc/yum.repos.d/hdp.repo &lt;a href=&#34;http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.4.0/hdp.repo&#34; class=&#34;bare&#34;&gt;http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.4.0/hdp.repo&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ambari-server setup --jdbc-db=mysql --jdbc-driver=/path/to/mysql/mysql-connector-java.jar&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ambari-server setup --jdbc-db=postgres --jdbc-driver=/root/postgresql-9.4.1211.jar&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;admin/admin&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&lt;a href=&#34;http://192.168.137.123/HDP/centos7/2.6.4.0-91/&#34; class=&#34;bare&#34;&gt;http://192.168.137.123/HDP/centos7/2.6.4.0-91/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&lt;a href=&#34;http://192.168.137.123/HDP-UTILS/&#34; class=&#34;bare&#34;&gt;http://192.168.137.123/HDP-UTILS/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&lt;a href=&#34;http://192.168.137.123/HDP-GPL/centos7/2.6.4.0-91/&#34; class=&#34;bare&#34;&gt;http://192.168.137.123/HDP-GPL/centos7/2.6.4.0-91/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&lt;a href=&#34;http://192.168.137.123/HDP/centos7/2.6.4.0-91/HDP-2.6.4.0-91.xml&#34; class=&#34;bare&#34;&gt;http://192.168.137.123/HDP/centos7/2.6.4.0-91/HDP-2.6.4.0-91.xml&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_参考&#34;&gt;2. 参考&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;olist arabic&#34;&gt;
&lt;ol class=&#34;arabic&#34;&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.hortonworks.com/HDPDocuments/Ambari-2.2.2.0/bk_Installing_HDP_AMB/content/_start_the_ambari_server.html&#34; class=&#34;bare&#34;&gt;https://docs.hortonworks.com/HDPDocuments/Ambari-2.2.2.0/bk_Installing_HDP_AMB/content/_start_the_ambari_server.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Python script has been killed due to timeout after waiting 1800 secs&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;vi /etc/ambari-server/conf/ambari.properties&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;agent.package.install.task.timeout=1800
改为2700&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;postgres sql    ambari/bigdata
psql -U ambari&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;mv public.sql /var/lib/pgsql
psql -U ambari -W -d postgres -f public.sql&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;CREATE DATABASE hive OWNER postgres;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;CREATE DATABASE js_toolbox OWNER postgres;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;create user hive with login password &#39;bigdata&#39;;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;vi /var/lib/pgsql/data/pg_hba.conf&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;python /usr/lib/ambari-agent/lib/ambari_agent/HostCleanup.py --silent --skip=users&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;cat /root/.ssh/id_rsa&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;sed -i s@SELINUX=enforcing@SELINUX=disabled@ /etc/selinux/config&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;echo &#34;192.168.137.123  hadoop1&#34; &amp;gt;&amp;gt; /etc/hosts
echo &#34;192.168.137.124  hadoop2&#34; &amp;gt;&amp;gt; /etc/hosts
echo &#34;192.168.137.125  hadoop3&#34; &amp;gt;&amp;gt; /etc/hosts&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_ambari动态添加删除节点&#34;&gt;3. ambari动态添加删除节点&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;sect2&#34;&gt;
&lt;h3 id=&#34;_下线节点&#34;&gt;3.1. 下线节点&lt;/h3&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;namenode节点上dfs.exclude文件
echo &#34;hadoop3&#34; &amp;gt; /etc/hadoop/conf/dfs.exclude&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;resourcemanager节点上yarn.exclude文件
echo &#34;hadoop3&#34; &amp;gt; /etc/hadoop/conf/yarn.exclude&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;选择任意一台节点执行：
hdfs dfsadmin -refreshNodes
yarn rmadmin -refreshNodes
yarn node -list&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect2&#34;&gt;
&lt;h3 id=&#34;_上线节点&#34;&gt;3.2. 上线节点&lt;/h3&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;上线节点基本与下线相同
1) slaves文件里每行添加一个上线服务器名，同时保证dfs.exclude文件为空。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;2) ./hdfs dfsadmin -refreshNodes&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;3) 在要上线的节点上启动datanode：
./hadoop-daemon.sh start datanode&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;4) 如需要启动nodemanager,则执行：
./yarn-daemon.sh start nodemanager&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;5) 修改slaves，添加上线节点的hosts&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>clustershell</title>
      <link>/post/linux/clustershell/</link>
      <pubDate>Sat, 27 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/linux/clustershell/</guid>
      <description>&lt;div id=&#34;toc&#34; class=&#34;toc&#34;&gt;
&lt;div id=&#34;toctitle&#34;&gt;clustershell&lt;/div&gt;
&lt;ul class=&#34;sectlevel1&#34;&gt;
&lt;li&gt;&lt;a href=&#34;#_clustershell&#34;&gt;1. clustershell&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#_参考&#34;&gt;2. 参考&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_clustershell&#34;&gt;1. clustershell&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;olist arabic&#34;&gt;
&lt;ol class=&#34;arabic&#34;&gt;
&lt;li&gt;
&lt;p&gt;安装&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class=&#34;listingblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;python2.7 get-pip.py -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install ClusterShell -i https://pypi.tuna.tsinghua.edu.cn/simple&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;olist arabic&#34;&gt;
&lt;ol class=&#34;arabic&#34;&gt;
&lt;li&gt;
&lt;p&gt;配置&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class=&#34;listingblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;cat &amp;gt; /etc/clustershell/groups.conf &amp;lt;&amp;lt;_EOF_

# ClusterShell node groups main configuration file
#
# Please see `man 5 groups.conf` and
# http://clustershell.readthedocs.org/en/latest/config.html#node-groups
# for further details.
#
# NOTE: This is a simple group configuration example file, not a
#       default config file. Please edit it to fit your own needs.
#
[Main]

# Default group source
default: local

# Group source config directory list (space separated, use quotes if needed).
# Examples are provided. Copy them from *.conf.example to *.conf to enable.
#
# $CFGDIR is replaced by the highest priority config directory found.
# Default confdir value enables both system-wide and user configuration.
confdir: /etc/clustershell/groups.conf.d $CFGDIR/groups.conf.d

# New in 1.7, autodir defines a directory list (space separated, use quotes if
# needed) where group data files will be auto-loaded.
# Only *.yaml file are loaded. Copy *.yaml.example files to enable.
# Group data files avoid the need of external calls for static config files.
#
# $CFGDIR is replaced by the highest priority config directory found.
# Default autodir value enables both system-wide and user configuration.
autodir: /etc/clustershell/groups.d $CFGDIR/groups.d

# Sections below also define group sources.
#
# NOTE: /etc/clustershell/groups is deprecated since version 1.7, thus if it
#       doesn&#39;t exist, the &#34;local.cfg&#34; file from autodir will be used.
#
# See the documentation for $CFGDIR, $SOURCE, $GROUP and $NODE upcall special
# variables. Please remember that they are substitued before the shell command
# is effectively executed.
#
[local]
# flat file &#34;group: nodeset&#34; based group source using $CFGDIR/groups.d/local.cfg
# with backward support for /etc/clustershell/groups
map: [ -f $CFGDIR/groups ] &amp;amp;&amp;amp; f=$CFGDIR/groups || f=$CFGDIR/groups.d/local.cfg; sed -n &#39;s/^$GROUP:\(.*\)/\1/p&#39; $f
all: [ -f $CFGDIR/groups ] &amp;amp;&amp;amp; f=$CFGDIR/groups || f=$CFGDIR/groups.d/local.cfg; sed -n &#39;s/^all:\(.*\)/\1/p&#39; $f
list: [ -f $CFGDIR/groups ] &amp;amp;&amp;amp; f=$CFGDIR/groups || f=$CFGDIR/groups.d/local.cfg; sed -n &#39;s/^\([0-9A-Za-z_-]*\):.*/\1/p&#39; $f

_EOF_&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;listingblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre class=&#34;highlightjs highlight&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;cat &amp;gt; /etc/clustershell/groups.d/cluster.yaml &amp;lt;&amp;lt;_EOF_
kafkas:
    brokers: &#39;hadoop[1,2]&#39;
_EOF_&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;olist arabic&#34;&gt;
&lt;ol class=&#34;arabic&#34;&gt;
&lt;li&gt;
&lt;p&gt;执行命令&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class=&#34;listingblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;clush -g kafkas:brokers uptime&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_参考&#34;&gt;2. 参考&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;olist arabic&#34;&gt;
&lt;ol class=&#34;arabic&#34;&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://clustershell.readthedocs.io/en/latest/tools/clush.html&#34; class=&#34;bare&#34;&gt;http://clustershell.readthedocs.io/en/latest/tools/clush.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class=&#34;listingblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre class=&#34;highlightjs highlight&#34;&gt;&lt;code&gt;clush -g kafkas:brokers &#39;mkdir -p ~/tmp/{bin,tar}&#39;

clush -g kafkas:brokers -c /root/tmp/tar/kafka_2.11-0.8.2.2.tgz --dest ~/tmp/tar
clush -g kafkas:brokers -c /root/tmp/bin/set_kafka_config.sh --dest ~/tmp/bin

clush -g kafkas:brokers &#39;ls ~/tmp/tar&#39;

CMD=&#39;tar -zxf /root/tmp/tar/kafka_2.11-0.8.2.2.tgz -C /root/tmp/&#39;
clush -v -g kafkas:brokers $CMD

#!/bin/bash

KAFKA_HOME=/root/tmp/kafka_2.11-0.8.2.2
KAFKA_HOST_NAME=`hostname`
KAFKA_NUM_PARTITIONS=3
KAFKA_ZK_URL=&#39;vm73:2181,vm74:2181,vm75:2181&#39;

# host.name
sed -i &#34;s/^\#\?host.name=.*/host.name=${KAFKA_HOST_NAME}/&#34; $KAFKA_HOME/config/server.properties
# num.partitions
sed -i &#34;s/^\#\?num.partitions=.*/num.partitions=${KAFKA_NUM_PARTITIONS}/&#34; $KAFKA_HOME/config/server.properties
# zookeeper.connect=localhost:2181
sed -i &#34;s/^\#\?zookeeper.connect=.*/zookeeper.connect=${KAFKA_ZK_URL}/&#34; $KAFKA_HOME/config/server.properties


clush -w vm74

clush -g kafkas:brokers &#39;sh /root/tmp/bin/set_kafka_config.sh&#39;

KAFKA_HOME=/root/tmp/kafka_2.11-0.8.2.2
CMD=&#34;cat ${KAFKA_HOME}/config/server.properties|grep &#39;host.name|zookeeper.connect&#39;&#34;
CMD=&#34;cat ${KAFKA_HOME}/config/server.properties|grep &#39;zookeeper.connect&#39;&#34;
clush -g kafkas:brokers $CMD

declare -A map=([&#34;vm74&#34;]=&#34;1&#34; [&#34;vm75&#34;]=&#34;2&#34; [&#34;vm76&#34;]=&#34;3&#34;)

for key in ${!map[@]}
  do
    echo ${map[$key]}
    CMD=&#34;sed -i \&#34;s/^\#\?broker.id=.*/broker.id=${map[$key]}/\&#34; $KAFKA_HOME/config/server.properties&#34;
    clush -w $key $CMD
  done

for i in 1 2 3
  do
    echo &#34;$i--&amp;gt;$(uptime)&#34;
  done&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;clush -w vm76 &#39;tail -200 ~/tmp/logs/kafka.log&#39;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;clush -w vm75 &#39;tail -200 ~/tmp/logs/kafka.log&#39;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;clush -w vm74 &#39;tail -200 ~/tmp/logs/kafka.log&#39;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;clush -g kafkas:brokers &#39;tail -f ~/tmp/logs/kafka.log&#39;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Streampro 学习</title>
      <link>/post/bigdata/spark/streamingpro/streamingpro/</link>
      <pubDate>Sat, 20 Jan 2018 18:20:34 +0000</pubDate>
      
      <guid>/post/bigdata/spark/streamingpro/streamingpro/</guid>
      <description>&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;==&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SHome=/d/spark
SPARK_HOME=/d/env/spark-2.2.1-bin-hadoop2.7&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;sh $SPARK_HOME/bin/spark-submit   --class streaming.core.StreamingApp \
  --master local[2] \
  --name test \
  $SHome/streamingpro-spark-2.0-1.0.0.jar \
  -streaming.name test \
  -streaming.platform spark \
  -streaming.job.file.path &lt;a href=&#34;file://$SHome/batch_1.json&#34; class=&#34;bare&#34;&gt;file://$SHome/batch_1.json&lt;/a&gt;
  -streaming.sql.source.a.path &lt;a href=&#34;file://$SHome/data/source/batch_1.json&#34; class=&#34;bare&#34;&gt;file://$SHome/data/source/batch_1.json&lt;/a&gt;
  -streaming.sql.out.b.path &lt;a href=&#34;file://$SHome/data/out/parquet_1&#34; class=&#34;bare&#34;&gt;file://$SHome/data/out/parquet_1&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>leetcode算法</title>
      <link>/post/java/algorithm/1-10/</link>
      <pubDate>Mon, 27 Nov 2017 15:43:47 +0000</pubDate>
      
      <guid>/post/java/algorithm/1-10/</guid>
      <description>&lt;div class=&#34;sect2&#34;&gt;
&lt;h3 id=&#34;_longest_substring_without_repeating_characters_最长的子串不重复的字符&#34;&gt;Longest Substring Without Repeating Characters(最长的子串不重复的字符)&lt;/h3&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Intuition&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Check all the substring one by one to see if it has no duplicate character.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Algorithm&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Suppose we have a function boolean allUnique(String substring) which will return true if the characters in the substring are all unique, otherwise false. We can iterate through all the possible substrings of the given string s and call the function allUnique. If it turns out to be true, then we update our answer of the maximum length of substring without duplicate characters.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Now let&amp;#8217;s fill the missing parts:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;To enumerate all substrings of a given string, we enumerate the start and end indices of them. Suppose the start and end indices are *i* and *j*, respectively. Then we have *0≤i&amp;lt;j≤n*  (here end index *j* is exclusive by convention). Thus, using two nested loops with i from  *0*  to  *n−1*  and  *j*  from  *i+1*  to  *n* , we can enumerate all the substrings of  *s* .&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;为了枚举给定字符串的所有子字符串，我们枚举它们的开始和结束索引。 假设开始和结束的指数分别是 i 和 j 。 那么我们有0≤i&amp;lt;j≤n（这里的结束索引 j 是常规排除的）。 因此，使用从 0 到 n-1 的i和从 i + 1 到 n 的 j 的两个嵌套循环，我们可以列举所有的 s&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;To check if one string has duplicate characters, we can use a set. We iterate through all the characters in the string and put them into the set one by one. Before putting one character, we check if the set already contains it. If so, we return false. After the loop, we return true.&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;要检查一个字符串是否有重复的字符，我们可以使用一个集合。 我们遍历字符串中的所有字符，并将它们逐个放入集合中。 在放一个字符之前，我们检查一下这个集合是否已经包含它。 如果是这样，我们返回false。 循环之后，我们返回true。&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect3&#34;&gt;
&lt;h4 id=&#34;_算法2&#34;&gt;算法2&lt;/h4&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Algorithm
    The naive approach is very straightforward. But it is too slow. So how can we optimize it?&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;In the naive approaches, we repeatedly check a substring to see if it has duplicate character. But it is unnecessary. If a substring s{ij} from index i to j−1 is already checked to have no duplicate characters. We only need to check if s[j] is already in the substring sij&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>常用JVM配置参数</title>
      <link>/post/java/jvm/%E5%B8%B8%E7%94%A8JVM%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0/</link>
      <pubDate>Sat, 25 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/java/jvm/%E5%B8%B8%E7%94%A8JVM%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0/</guid>
      <description>&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;_trace_跟踪参数&#34;&gt;Trace 跟踪参数&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;listingblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre class=&#34;highlight&#34;&gt;&lt;code&gt;-verbose:gc     # 打开gc
-XX:+printGC

可以打印GC的简要信息
[GC 4790K-&amp;gt;374K(15872K), 0.0001606 secs]
4790K -&amp;gt; GC前的大小
374K  -&amp;gt; GC后的大小
15872K -&amp;gt; 堆大小


-XX:+PrintGCDetails
打印GC详细信息
-XX:+PrintGCTimeStamps
打印CG发生的时间戳
例
[GC[DefNew: 4416K-&amp;gt;0K(4928K), 0.0001897 secs] 4790K-&amp;gt;374K(15872K), 0.0002232 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]

新生代GC
DefNew: 4416K-&amp;gt;0K(4928K)

详细GC信息
-XX:+PrintGCDetails的输出

-Xloggc:log/gc.log
指定GC log的位置，以文件输出
帮助开发人员分析问题


-XX:+PrintHeapAtGC
每次一次GC后，都打印堆信息

-XX:+TraceClassLoading
监控类的加载&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;-XX:+PrintClassHistogram
按下Ctrl+Break后，打印类的信息：&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;sect1&#34;&gt;
&lt;h2 id=&#34;__num_instances_bytes_class_name&#34;&gt; num     #instances         #bytes  class name&lt;/h2&gt;
&lt;div class=&#34;sectionbody&#34;&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;1:        890617      470266000  [B
2:        890643       21375432  java.util.HashMap$Node
3:        890608       14249728  java.lang.Long
4:            13        8389712  [Ljava.util.HashMap$Node;
5:          2062         371680  [C
6:           463          41904  java.lang.Class&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;分别显示：序号、实例数量、总大小、类型&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;-Xmn
设置新生代大小
-XX:NewRatio
新生代（eden+2*s）和老年代（不包含永久区）的比值
4 表示 新生代:老年代=1:4，即年轻代占堆的1/5
-XX:SurvivorRatio
设置两个Survivor区和eden的比
幸存区  from to
8表示 两个Survivor :eden=2:8，即一个Survivor占年轻代的1/10&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;-Xmx20m -Xms20m -Xmn1m  -XX:+PrintGCDetails&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;-Xmx20m : 最大堆内存20m
-Xms20m : 最小堆内存20m
-Xmn1m : 新生代1m eden + from + to 一共1m&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>