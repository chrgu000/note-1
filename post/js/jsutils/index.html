<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Js工具类</title>
<meta name="description" content=" John Doe&#39;s Personal blog about everything">
<meta name="generator" content="Hugo 0.17" />
<meta property="og:title" content="Js工具类" />
<meta property="og:description" content="JSUtils JS绑定模板 /*---------- -----start----------------*/ $(document).ready(function(){ $(&quot;#f_btn_id&quot;).each(function(){ $(this).bind(&quot;click&quot;,{flag:$(this)},jumpToUrl); }); function jumpToUrl(event){ var data = event.data.flag; console.log(data.attr(&quot;a_user_id&quot;)); window.location.href = &quot;fabu.jsp?cust_id=&quot;&#43;data.attr(&quot;a_cust_id&quot;); }; }); /*---------- -----end----------------*/ //页面全部加载后执行 $(document).ready(function(){ $(&quot;.wrap_con_r&quot;).find(&quot;*[a_flag]&quot;).each(function(){ alert(&#39;a&#39;); $(this).bind(&quot;click&quot;,{flag:$(this)},toSupply); }); });  在div中查找具有attr属性的所有元素 function genProAttr2(obj,fifter,attr_id,attr_code,attr_name){ var tmp_str = &quot;&quot;; //在div中查找具有attr属性的所有元素 obj.find(&quot;*[&quot;&#43;fifter&#43;&quot;]&quot;).each(function(){ var tmp1 = &quot;&quot;; if($(this).val()!=&quot;&quot; &amp;&amp; $(this).val()!=&quot;-1&quot;){ tmp1 = {attr_id:$(this).attr(attr_id),attr_code:$(this).attr(attr_code),attr_name:$(this).attr(attr_name),attr_value:$(this).val()}; tmp_str =$.toJSON(tmp1)&#43;&quot;|&quot;&#43; tmp_str; }; }); //替换,号 return tmp_str.replace(/\&quot;/g, &quot;@&quot;); }  字符串去重复 function ArrayRemoveByValue(str_value,arr_remove){ var num_to_del =new RegExp(str_value); var db_d =new RegExp(&#39;\,{2}&#39;); var se_d =new RegExp(&#39;(^\,)|(\,$)&#39;); arr_ret = arr_remove." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/js/jsutils/" />


<meta property="og:updated_time" content="2017-01-01T00:00:00&#43;00:00"/>











<link rel="stylesheet" href="/css/google-font.css?family=Open+Sans:400,400italic,700,600" type="text/css" media="all" />
<link rel="stylesheet" href="/css/atom-one-dark.css">
<link rel="stylesheet" href="/css/style.css" type="text/css" media="all" />
<link rel="stylesheet" href="/css/custom.css" type="text/css" media="all" />
<link rel="stylesheet" href="/css/jquery.bigautocomplete.css" type="text/css" media="all" />
<link rel="stylesheet" href="/css/asciinema-player.css" type="text/css" media="all" />
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/fonts/fontawesome-webfont.svg" rel="stylesheet">

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script type="text/javascript" src="/js/scripts.js"></script>
<!--[if lt IE 9]>
	<script src="/js/css3-mediaqueries.js"></script>
<![endif]-->

</head>
<body id="mr-mobile" class="home blog mr-right-sb" itemscope="itemscope" itemtype="http://schema.org/WebPage">
	<div class="mr-container mr-container-outer">
		<div class="mr-header-mobile-nav clearfix"></div>
			<header class="mr-header" itemscope="itemscope" itemtype="http://schema.org/WPHeader">
				<div class="mr-container mr-container-inner mr-row clearfix">
					<div class="mr-custom-header clearfix">
						<div class="mr-site-identity">
							<div class="mr-site-logo" role="banner" itemscope="itemscope" itemtype="http://schema.org/Brand">
								<div class="mr-header-text">
									<a class="mr-header-text-link" href="/" title="工作笔记" rel="home">
										<h1 class="mr-header-title">工作笔记</h1>
										<h2 class="mr-header-tagline">点滴记录</h2>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="mr-main-nav-wrap">
					<nav class="menu" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
	<ul class="menu__list">
        
            <li class="menu__item"><a class="menu__link" href="/categories/docker">docker</a></li>
        
            <li class="menu__item"><a class="menu__link" href="/categories/hadoop">hadoop</a></li>
        
            <li class="menu__item"><a class="menu__link" href="/categories/spark">spark</a></li>
        
            <li class="menu__item"><a class="menu__link" href="/categories/storm">storm</a></li>
        
	</ul>
</nav>
				</div>
			</header>
		<div class="mr-wrapper clearfix">


<div class="mr-content" id="main-content" role="main" itemprop="mainContentOfPage">
	<article class="post">
		<header class="entry-header clearfix">
			<h1 class="entry-title">Js工具类</h1>
			<p class="mr-meta entry-meta">
				<svg class="icon icon-time" height="14" viewBox="0 0 16 16" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m8-.0000003c-4.4 0-8 3.6-8 8 0 4.4000003 3.6 8.0000003 8 8.0000003 4.4 0 8-3.6 8-8.0000003 0-4.4-3.6-8-8-8zm0 14.4000003c-3.52 0-6.4-2.88-6.4-6.4000003 0-3.52 2.88-6.4 6.4-6.4 3.52 0 6.4 2.88 6.4 6.4 0 3.5200003-2.88 6.4000003-6.4 6.4000003zm.4-10.4000003h-1.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg>
				<time class="entry-meta-date updated" datetime="2017-01-01 00:00:00 &#43;0000 UTC">January 01, 2017</time>
			</p>
		</header>
		<div class="entry-content clearfix">
			
			

<h1 id="jsutils">JSUtils</h1>

<h3 id="js绑定模板">JS绑定模板</h3>

<pre><code class="language-javascript">/*----------  -----start----------------*/
    $(document).ready(function(){
        $(&quot;#f_btn_id&quot;).each(function(){
            $(this).bind(&quot;click&quot;,{flag:$(this)},jumpToUrl);
        });
        function jumpToUrl(event){
            var data = event.data.flag;
            console.log(data.attr(&quot;a_user_id&quot;));
            window.location.href = &quot;fabu.jsp?cust_id=&quot;+data.attr(&quot;a_cust_id&quot;);
        };
     });
/*----------  -----end----------------*/
        //页面全部加载后执行
    $(document).ready(function(){
        $(&quot;.wrap_con_r&quot;).find(&quot;*[a_flag]&quot;).each(function(){
            alert('a');
            $(this).bind(&quot;click&quot;,{flag:$(this)},toSupply);
        });
    });
</code></pre>

<h3 id="在div中查找具有attr属性的所有元素">在div中查找具有attr属性的所有元素</h3>

<pre><code class="language-javascript">    function genProAttr2(obj,fifter,attr_id,attr_code,attr_name){
        var tmp_str = &quot;&quot;;
        //在div中查找具有attr属性的所有元素
        obj.find(&quot;*[&quot;+fifter+&quot;]&quot;).each(function(){
            var tmp1 = &quot;&quot;;
            if($(this).val()!=&quot;&quot; &amp;&amp; $(this).val()!=&quot;-1&quot;){
                tmp1 = {attr_id:$(this).attr(attr_id),attr_code:$(this).attr(attr_code),attr_name:$(this).attr(attr_name),attr_value:$(this).val()};
                tmp_str =$.toJSON(tmp1)+&quot;|&quot;+ tmp_str;
            };
        });
        //替换,号
        return tmp_str.replace(/\&quot;/g, &quot;@&quot;);
    }
</code></pre>

<h3 id="字符串去重复">字符串去重复</h3>

<pre><code class="language-javascript">function ArrayRemoveByValue(str_value,arr_remove){
    var num_to_del =new  RegExp(str_value);
    var db_d =new  RegExp('\,{2}');
    var se_d =new  RegExp('(^\,)|(\,$)');
    arr_ret = arr_remove.toString().replace(num_to_del,'').replace(db_d,',').replace(se_d,'').split(',');
    return arr_ret;
}
</code></pre>

<h3 id="拼接">拼接</h3>

<pre><code class="language-javascript">/*---------- 拼接 -----start----------------*/
    function contact(dom,attr){
        var val = &quot;&quot;;
        $(''+dom+'['+attr+']').each(function(index,element){
            var this_val = $(this).val();
            if(this_val != &quot;&quot;){
                if(index == 0){
                    val = this_val;
                }else{
                    val = val +'-'+this_val;
                }
            }
        });
        return val;
        //console.log(val);
    };
/*---------- 拼接 -----end----------------*/
</code></pre>

<h3 id="jquery-validate-form-插件-校验">jQuery.validate.form 插件 校验</h3>

<blockquote>
<p>网址
<a href="http://www.runoob.com/jquery/jquery-plugin-validate.html">jQuery Validate</a></p>
</blockquote>

<p>&ndash;
&gt;Jquery Validate 验证规则</p>

<ul>
<li><code>required:true</code>              必输字段</li>
<li><code>remote:”check.php”</code>         使用ajax方法调用check.php验证输入值</li>
<li><code>email:true</code>                 必须输入正确格式的电子邮件</li>
<li><code>url:true</code>                   必须输入正确格式的网址</li>
<li><code>date:true</code>                  必须输入正确格式的日期</li>
<li><code>dateISO:true</code>               必须输入正确格式的日期(ISO)，例如：2009-06-23，1998/01/22 只验证格式，不验证有效性</li>
<li><code>number:true</code>                必须输入合法的数字(负数，小数)</li>
<li><code>digits:true</code>                必须输入整数</li>
<li><code>creditcard:</code>                必须输入合法的信用卡号</li>
<li>`equalTo:”#field”          输入值必须和#field相同</li>
<li><code>accept:</code>                   输入拥有合法后缀名的字符串（上传文件的后缀）</li>
<li><code>maxlength:5</code>               输入长度最多是5的字符串(汉字算一个字符)</li>
<li><code>minlength:10</code>              输入长度最小是10的字符串(汉字算一个字符)</li>
<li><code>rangelength:[5,10]</code>        输入长度必须介于 5 和 10 之间的字符串”)(汉字算一个字符)</li>
<li><code>range:[5,10]</code>              输入值必须介于 5 和 10 之间</li>
<li><code>max:5</code>                     输入值不能大于5</li>
<li><code>min:10</code>                    输入值不能小于10</li>
</ul>

<blockquote>
<p>Demo</p>
</blockquote>

<p>+</p>

<pre><code class="language-javascript">/*----------------------校验----------------------*/
!function(){
    $jquery17(&quot;#skuForm&quot;).validate({
        //添加验证规则
        rules: {
            brand_price:{
                lt:true,
                min:0
            },
            product_price:{
                min:0
            }
        },
        //提示信息
        messages:{
            brand_price:{
                min:&quot;输入值不能小于{0}&quot;
            },
            product_price:{
                min:'输入值不能小于{0}'
            }
        }
    });
    // 验证值必须大于特定值(不能等于)
    $jquery17.validator.addMethod(&quot;lt&quot;, function(value, element, param) {
        var isTrue = false;
        $(element).parent().parent().find('input[name=&quot;product_price&quot;]').each(function(){
            if(value*1 &lt; $(this).val()*1){
                isTrue = true;
            }
        });
        return isTrue;
    }, $jquery17.validator.format('平台供货价不能大于价格!'));
}();
--
//校验
if($jquery17(&quot;#skuForm&quot;).valid()){
    ajaxSubmitForm($(&quot;#productAttrForm&quot;)[0]);
}
</code></pre>

<h3 id="fancybox">Fancybox</h3>

<ul>
<li><strong>基本用法</strong>
<code>javascript
$(function(){
$jquery17(&quot;#iframe&quot;).fancybox({
    //在body上指定宽高
    'width':'70%',
    //'height':'75%',
    'autoScale':true,
    'afterClose':jumpurl
});
//关闭弹框
parent.$jquery17.fancybox.close();
});
</code></li>
<li>样式
<code>html
在body上指定宽高
&lt;body style=&quot;width: 310px;height: 176px;&quot;&gt;
</code></li>
<li><strong>iframe中,在最上层页面弹框</strong>
<code>javascript
//在top层页面导入fancybox相关文件
/*
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/js/jquery.fancybox.css?v=2.1.5&quot; media=&quot;screen&quot; /&gt;
&lt;jsp:include page=&quot;/program/company/goods/base_script.jsp&quot;&gt;&lt;/jsp:include&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/js/jquery.fancybox.js?v=2.1.5&quot;&gt;&lt;/script&gt;
*/
$(document).ready(function(){
//弹框
top.$jquery17(top.frames['main'].$('#iframe-test')[0]).fancybox({
    'width':'80%',
    //'height':'75%',
    //'afterClose':a
});
});
</code></li>
</ul>

<h3 id="常用js方法"><strong>常用Js方法</strong></h3>

<p>+</p>

<pre><code class="language-javascript">function T(){
        this.t = 't';
};
T.prototype = {
   //判断对象不为空
    isEmpty: function(variable){
        //var data = event.data.flag;
        var tmp_var = variable || '';
        if(typeof tmp_var == &quot;null&quot; || tmp_var.replace(/(^s*)|(s*$)/g, &quot;&quot;).length ==0){
            return true;
        }
        return false;
    },
    //人民币转大写
    numToCny: function(n){
        var fraction = ['角', '分'];
        var digit = ['零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖'];
        var unit = [ ['元', '万', '亿'], ['', '拾', '佰', '仟']  ];
        var head = n &lt; 0? '欠': '';
        n = Math.abs(n);

        var s = '';

        for (var i = 0; i &lt; fraction.length; i++)
        {
            s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, '');
        }
        s = s || '整';
        n = Math.floor(n);

        for (var i = 0; i &lt; unit[0].length &amp;&amp; n &gt; 0; i++)
        {
            var p = '';
            for (var j = 0; j &lt; unit[1].length &amp;&amp; n &gt; 0; j++)
            {
                p = digit[n % 10] + unit[1][j] + p;
                n = Math.floor(n / 10);
            }
            s = p.replace(/(零.)*零$/, '').replace(/^$/, '零')  + unit[0][i] + s;
        }
        return head + s.replace(/(零.)*零元/, '元').replace(/(零.)+/g, '零').replace(/^整$/, '零元整');
    },
    //只能输入数字
    onlyNum: function() {
        if(!(event.keyCode==46)&amp;&amp;!(event.keyCode==8)&amp;&amp;!(event.keyCode==37)&amp;&amp;!(event.keyCode==39))
        if(!((event.keyCode&gt;=48&amp;&amp;event.keyCode&lt;=57)||(event.keyCode&gt;=96&amp;&amp;event.keyCode&lt;=105)))
        event.returnValue=false;
    },
    // 只能输入数字
    keyUp: function(data) {
        var ob = data;
        if (!ob.value.match(/^[\+\-]?\d*?\.?\d*?$/)){
            ob.value = ob.t_value;
        }else{
            ob.t_value = ob.value;
        }
        if (ob.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/)){
            ob.o_value = ob.value;
        }
    },
    //拼接字符串
    contact: function(dom,attr){
        var val = &quot;&quot;;
        $(''+dom+'['+attr+']').each(function(index,element){
            var this_val = $(this).val();
            if(this_val != &quot;&quot;){
                if(index == 0){
                    val = this_val;
                }else{
                    val = val +'-'+this_val;
                }
            }
        });
        return val;
        //console.log(val);
    };
  };
</code></pre>

<h3 id="a标签绑定多个方法">a标签绑定多个方法</h3>

<ul>
<li><strong>绑定两个keyup方法</strong>
<code>javascript
&lt;a href=&quot;javascript:;&quot; data-multi onkeyup=&quot;ba.t.keyUp(this)&quot;&gt;xxxx&lt;/a&gt;
//
&lt;script type=&quot;text/javascript&quot;&gt;
$('*[data-multi]').each(function(){
  $(this).bind('keyup',{flag:$(this)},ba.t.multi);
});
&lt;/script&gt;
</code></li>
</ul>

<h3 id="动态添加form">动态添加form</h3>

<ol>
<li><strong>form</strong>
<code>javascript
// 创建Form
var form = $('&lt;form&gt;&lt;/form&gt;');
// 设置属性
form.attr('action', '/doTradeReg.do');
form.attr('method', 'post');
form.attr('name', 'addForm');
var id_input = $('&lt;input type=&quot;hidden&quot; name=&quot;id&quot; value=&quot;'+invoice_id+'&quot;/&gt;');
form.append(id_input);
form.appendTo(document.body);
</code></li>
<li><strong>dom</strong>
<code>javascript
dynamicAdd: function(tag){
  var dom = $('&lt;'+tag+'&gt;&lt;/'+tag+'&gt;');
  dom.attr('class', 'fancybox.iframe iframe');
  dom.attr('href','javascript:;');
  dom.appendTo(document.body);
},
</code></li>
</ol>

<p>###</p>

		</div>
		
	</article>
	
<div class="mr-author-box clearfix">
	<figure class="mr-author-box-avatar">
		<img alt="dishui avatar" src="/src/img/dishui.png" class="avatar avatar-90 photo" height="90" width="90">
	</figure>
	<div class="mr-author-box-header">
		<span class="mr-author-box-name">About dishui</span>
	</div>
	<div class="mr-author-box-bio">
		辛勤的搬运工!!!
	</div>
</div>

	

	<nav class="mr-post-nav mr-row clearfix" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
		
		<div class="mr-col-1-2 mr-post-nav-item mr-post-nav-prev">
			<a href="/post/java/jrebel/" rel="prev"><span>«Previous</span><p>Jrebel 热部署</p></a>
		</div>
		
		
		<div class="mr-col-1-2 mr-post-nav-item mr-post-nav-next">
			<a href="/post/linux/cluster/" rel="next"><span>Next»</span><p>LVS 集群配置</p></a>
		</div>
		
	</nav>


	
</div>

<aside class="mr-sidebar" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">
<div class="mr-widget widget_search navbar-wrapper" >
    <form class="search-form" role="search" >
        <label>
            <span class="screen-reader-text">Search for:</span>
            <input id="lanren" type="search" class="search-field" placeholder="Search..." value="" name="q">
        </label>
        <div id="list-container" class="bdsug" style="height: auto; display: block;">
        </div>
    </form>
    <div id="side-toc" class="entry-content">
    
    </div>
</div>
</aside>
	</div>
		<div class="mr-copyright-wrap">
			<div class="mr-container mr-container-inner clearfix">
				<p class="mr-copyright">&copy; 2017 工作笔记. <a href="https://git.oschina.net/dishui/dishui" target="_blank" rel="nofollow noopener noreferrer">dishui</a>.</p>
			</div>
		</div>
	</div>

<script>
	var navigation = responsiveNav(".menu", {
		navClass: "menu--collapse",
	});
</script>
<script src="/js/asciinema-player.js"></script>
<script data-main="/js/app.js" src="/js/require.js"></script>


</body>
</html>