<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Tmp-rsses on 工作笔记</title>
    <link>/tmp/index.xml</link>
    <description>Recent content in Tmp-rsses on 工作笔记</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <atom:link href="/tmp/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title></title>
      <link>/tmp/tmp2017-01-08/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/tmp/tmp2017-01-08/</guid>
      <description>&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SELECT zspl.*
FROM zh_sub_plan_launch zspl
WHERE zspl.plan_code IN
(SELECT plan_code
FROM zh_plan_launch zpl
WHERE zpl.state = &#39;01&#39;
AND zpl.table_date &amp;gt;= ?
AND zpl.table_date &amp;#8656; ?)&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SELECT *
FROM zh_plan zp
WHERE plan_code = ?&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SELECT * FROM zh_plan zp WHERE plan_code = &#39;20170116101801016&#39;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;$(this).find(&#39;&lt;strong&gt;[name=&#34;zhPlanCode&#34;]&#39;)
$(this).find(&#39;&lt;/strong&gt;[name=&#34;projectName&#34;]&#39;)
$(this).find(&#39;&lt;strong&gt;[name=&#34;reservoiCode&#34;]&#39;)
$(this).find(&#39;select[name=&#34;goodsCode&#34;]&#39;)
$(this).find(&#39;&lt;/strong&gt;[name=&#34;pickMode&#34;]&#39;)
$(this).find(&#39;&lt;strong&gt;[name=&#34;shipmentAddress&#34;]&#39;)
$(this).find(&#39;&lt;/strong&gt;[name=&#34;shipmentsCount&#34;]&#39;)
$(this).find(&#39;&lt;strong&gt;[name=&#34;receivingAddress&#34;]&#39;)
$(this).find(&#39;&lt;/strong&gt;[name=&#34;receivingUnit&#34;]&#39;)
$(this).find(&#39;&lt;strong&gt;[name=&#34;consignee&#34;]&#39;)
$(this).find(&#39;&lt;/strong&gt;[name=&#34;receivingPhone&#34;]&#39;)
$(this).find(&#39;&lt;strong&gt;[name=&#34;memo&#34;]&#39;)
$(this).find(&#39;&lt;/strong&gt;[name=&#34;contractCode&#34;]&#39;)&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SELECT plan.plan_name,sub.*,obo.number,sub.shipments_count) - (obo.number AS w_count,gi.goods_name,gi.brand,gi.model,ra.abbreviation FROM zh_plan plan,zh_sub_plan sub LEFT JOIN zh_out_bound_order obo ON sub.zh_plan_code = obo.zh_plan_code LEFT JOIN zh_goods_info gi ON sub.goods_code = gi.goods_code LEFT JOIN zh_reservoir_area ra ON sub.shipment_address = ra.reservoir_code WHERE plan.plan_code = sub.plan_code AND plan.plan_code = &#39;20170116154403004&#39;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run -it --rm --volume-driver=cifs -v 192.168.137.2/note-hugo:/hugo ansible/centos7-ansible:1.7 /bin/bash&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;服务器升级:
1. Rancher(docker容器管理平台)升级
	1.1 rancher/server:v1.2 升级到 v1.3.1
	1.2 rancher/agent:v1.1.1 升级到 v1.1.3
2. CI/CD 持续集成和持续交付
	1.1 Ansible 批量部署操作
	1.2 Jenkins与Ansible结合实现一键部署重启
Bug修复:
发货申请审批:
	1. 审批中的记录-审批状态显示错误-请改为审批中
	2. 查询条件-执行状态下拉值请和审核状态一致
	3. 直销合同新增审批-先保存之后修改时点提交则审批流名称则变为招标合同
	4. 直销合同发货审批流-赊销大于5000万时少了一步营销中心总经理审批
	5. 招标合同货物审批通过后-审批状态依然显示为待审核-没有变为已审核&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;优点：&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;1、光佳团队策划流程很到位&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;①活动人员安排：  尽管时间很紧，人员变动比较频繁，整体掌控很到位&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;②活动提前预热：  通过微信、圈子传播能够在短期内报名数60，很到位&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;③活动效果预估：  直播活动预估3万+，最终5万+&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;④活动成本预估：  赚到钱是硬道理&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;⑤活动互动效果：  笪总、美女主持人穿插广告、互动营销、红包形式的互动，提高了互动性&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;⑥活动效果公布：  通过微信、纸质形式通知效果很好&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;2、笪总团队线下配合很到位&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;①线下接待、让嘉宾没有陌生感、得到尊重感，有共同话题才是硬道理&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;②笪总的主持游刃有余，沥青届的老炮&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;改善：&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;1、直播体验需要提高：&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;1）直播网络稳定性、系统稳定性要提高，导致直播卡顿&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;反省：① 时间维度不够充裕：&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;中午13点到下午17点，共4个小时，时间比较紧凑，配置的设备比较多，容易影响直播效果的因素太多&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;② 技术人员切入不够早：&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;设备问题包括硬件、软件两方面，需要在启动项目时，尽早切入，以备不时之需，工作要交给擅长的人                       去做&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;2）嘉宾直播气氛需要提高&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;反省：① 房间不够大：&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;需要针对不同级别的嘉宾或者企业要有不同的配置，特别针对500强的企业要做的更加符合企业的气质&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;② 观众需要一定量级：&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;对于传统嘉宾来讲更有气氛，需要有人捧场，需要有人鼓掌，才有分享的激情&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;2、活动数据收集差&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;1）5万9的观众，如何收集起来？目前没有方法，即时有，也不够准确；&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;建议：app作为统一报名入口，但需要开发，需要周期&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;3、直播还能做什么？&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;1）广告营销：直播2小时，可以穿插广告（在直播屏幕上，不同时间段穿插广告）&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;2）延长营销：直播仅仅2个小时，如何能够让2个小时的营销效果时间延长，个人认为可以将直播经典内容沉淀下来&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;可以分段营销，在不同的地点、平台均可以&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;3）直播专场：此次是学术界的直播，后期可以做专场，譬如采购、销售、大客户比如中石化、中海油、京博等等&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;建议：提前准备听众&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;优点:
	运营部在人员少,资源少,时间紧的情况下办好一场很精彩的直播.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;改善:
	直播环境准备:
		1. 电脑
			笔记本和台式机都要准备,做好一比一测试,如果其中一台电脑有问题,可以用另一台电脑做备用
		2. 直播过程中可以插播公司广告,公司宣传片,充分利用直播平台
		3. 需要准备足够多的观众,烘托现场气氛&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SELECT
  mp_tmp.product_name AS product_name_noa,
  mp_tmp.&lt;strong&gt;,
  mpa_tmp.&lt;/strong&gt;
FROM
  (SELECT
    *
  FROM
    mlq_product
  WHERE gmt_modify &amp;gt; &#39;2016-07-22&#39;
  ) mp_tmp,
  (SELECT
    mpa.product_id,
    MAX(
      CASE
        mpa.attr_name
        WHEN &#39;销售地区&#39;
        THEN IFNULL(
          tranAddr (mpa.attr_value, &#39;-&#39;),
          CAST(mpa.attr_value AS CHAR(50))
        )
        ELSE NULL
      END
    ) sale_region,
    MAX(
      CASE
        mpa.attr_name
        WHEN &#39;出库地区&#39;
        THEN IFNULL(
          tranAddr (mpa.attr_value, &#39;-&#39;),
          CAST(mpa.attr_value AS CHAR(50))
        )
        ELSE NULL
      END
    ) repository_region,
    MAX(
      CASE
        mpa.attr_name
        WHEN &#39;出库地区&#39;
        THEN IFNULL(
          tranAddr (mpa.attr_value, &#39;-&#39;),
          CAST(mpa.attr_value AS CHAR(50))
        )
        ELSE NULL
      END
    ) repository_region_noa,
    MAX(
      CASE
        mpa.attr_name
        WHEN &#39;最小起订量&#39;
        THEN mpa.attr_value
        ELSE 0
      END
    ) min_quantity,
    MAX(
      CASE
        mpa.attr_name
        WHEN &#39;库存量&#39;
        THEN mpa.attr_value
        ELSE 0
      END
    ) stock_quantity,
    MAX(
      CASE
        mpa.attr_name
        WHEN &#39;单位&#39;
        THEN mpa.attr_value
        ELSE &#39;吨&#39;
      END
    ) unit,
    MAX(
      CASE
        mpa.attr_name
        WHEN &#39;交货天数&#39;
        THEN mpa.attr_value
        ELSE 7
      END
    ) delivery_day,
    MAX(
      CASE
        mpa.attr_name
        WHEN &#39;包装类型&#39;
        THEN mpa.attr_value
        ELSE &#39;散装&#39;
      END
    ) package_type
  FROM
    mlq_product_attr mpa
  WHERE mpa.product_id IN
    (SELECT
      id
    FROM
      mlq_product
    WHERE gmt_modify &amp;gt; &#39;2016-07-22&#39;)
  GROUP BY mpa.product_id) mpa_tmp
WHERE mp_tmp.id = mpa_tmp.product_id&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;大物流服务器重新规划部署:
1. CoreOS 系统安装
2. Docker 环境配置
3. Rancher Client 环境配置
4. nginx 反向代理 搭建
5. 大物流数据迁移
  5.1 Web 数据迁移
  5.2 数据库迁移&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;Mai沥青 PC 端 Bug 修复
大物流 PC 端 Bug 修复&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker create --volumes-from rancher-server \
 --name rancher-data rancher/server:1.2&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run -d --volumes-from rancher-data \
  -p 9090:8080 rancher/server:stable&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;jw.name(&#34;bool&#34;);
jw.beginObject();
jw.name(&#34;must&#34;);
jw.beginArray();
jw.beginObject();
jw.name(&#34;match&#34;);
jw.beginObject();
jw.name(&#34;cat_code&#34;);
jw.value(&#34;20150914q0asfEw&#34;);
jw.endObject();
jw.endObject();
jw.beginObject();
jw.name(&#34;match&#34;);
jw.beginObject();
jw.name(&#34;goods_status&#34;);
jw.value(&#34;c&#34;);
jw.endObject();
jw.endObject();
jw.endArray();
jw.endObject();&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run -d --name=httpd -p 8088:80 --volume-driver=cifs -v 192.168.137.2/note-hugo/public:/usr/local/apache2/htdocs/ httpd:2.2.32-alpine&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;供应商：&amp;lt;input name=&#34;new_seller_nick&#34; type=&#34;text&#34; value=&#34;${param.new_seller_nick }&#34;/&amp;gt;&amp;lt;/span&amp;gt;
商品名称：&amp;lt;input name=&#34;title&#34; type=&#34;text&#34; value=&#34;${param.title }&#34;/&amp;gt;&amp;lt;/span&amp;gt;
商品编号：&amp;lt;input name=&#34;id&#34; type=&#34;text&#34;/&amp;gt;&amp;lt;/span&amp;gt;
品牌：&amp;lt;select name=&#34;brand_id&#34; id=&#34;brand_id&#34;&amp;gt;&amp;lt;/select&amp;gt;&amp;lt;/span&amp;gt;
管理类目：&amp;lt;select name=&#34;cat_code&#34; id=&#34;first_category&#34;&amp;gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;server {
    listen       9090;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;    error_log /var/log/nginx/rancher-error.log
    access_log /var/log/nginx/rancher-access.log
    location / {
        proxy_redirect          off;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header REMOTE-HOST $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://192.168.1.129:9090;
    }
}&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run -d --volumes-from rancher-data -p 9090:8080 --name rancher-server rancher/server:stable&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;docker run -d -p 192.168.1.129:8080:8080 --name rancher-server rancher/server:stable&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;dishui.io:5000/nginx:stable&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;syslog-address               tcp://192.168.137.20:514&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;cat &amp;gt;&amp;gt; /opt/logio/docker-entrypoint.sh &amp;lt;&amp;lt;EOF
if [ &#34;$2&#34; = &#39;rsyslogd&#39; ]; then
  rsyslogd -n
fi
EOF&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;cat &amp;gt; /etc/nginx/conf.d/default.conf &amp;lt;&amp;lt;EOF
server {
    listen       80;
    access_log /var/log/nginx/test.log;
    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;
    }
}
EOF&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&lt;a href=&#34;http://192.168.1.129:8080/v2-beta/schemas&#34; class=&#34;bare&#34;&gt;http://192.168.1.129:8080/v2-beta/schemas&lt;/a&gt;
9FFE6681FF339A1A747D
m2E45BeYUxzr7FSAeNvhiR4R18hQL1n7nCdNQnqi&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SYSLOG_SERVER=192.168.137.20
SYSLOG_PORT=514
SYSLOG_PROTO=tcp&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;-e &#39;SYSLOG_SERVER=192.168.137.20&#39;-e &#39;SYSLOG_PORT=514&#39;-e &#39;SYSLOG_PROTO=tcp&#39;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;$ModLoad imfile
$InputFilePollInterval 10
$WorkDirectory /var/spool/rsyslog
$PrivDropToGroup adm&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;$template BiglogFormatTomcat,&#34;%msg%\n&#34;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;$InputFileName /apache-tomcat-7.0.62/logs/localhost_access_log.2017-02-21.txt
$InputFileTag access-log
$InputFileStateFile stat-access-log
$InputFileSeverity info
$InputFilePersistStateInterval 25000
$InputRunFileMonitor&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;if $programname == &#39;access-log&#39; then @192.168.137.20:514;BiglogFormatTomcat
if $programname == &#39;access-log&#39; then ~&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;FROM wuliu/tomcat:1.0&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ENV SYSLOG_SERVER 192.168.137.20
ENV SYSLOG_PORT 514
ENV SYSLOG_PROTO tcp&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;COPY ./tomcat.conf /etc/supervisord.conf.d/tomcat.conf
RUN yum -y install epel-release \
       &amp;amp;&amp;amp; yum -y install python-pip \
       &amp;amp;&amp;amp; pip install supervisor-logging \
       &amp;amp;&amp;amp; yum remove epel-release python-pip -y \
       &amp;amp;&amp;amp; yum clean all&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;echo &#34;30 22 * * * . /usr/sbin/logrotate /etc/logrotate.conf&#34; &amp;gt;&amp;gt; /var/spool/cron/root&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SELECT
  zra.reservoir_code,
  zra.abbreviation,
  zs.storage_code,
  zs.storage_capacity,
  CAST(rk.model70_rk AS CHAR) AS model70_rk,
  CAST(rk.model90_rk AS CHAR) AS model90_rk,
  CAST(ck.model70_ck AS CHAR) AS model70_ck,
  CAST(ck.model90_ck AS CHAR) AS model90_ck,
  CAST(ck.modelIC_ck AS CHAR) AS modelIC_ck,
  CAST(ck.modelID_ck AS CHAR) AS modelID_ck,
  CAST(ck.modelgt_ck AS CHAR) AS modelgt_ck,
  CAST(ck.modelgz_ck AS CHAR) AS modelgz_ck,
  CAST(sc.modelIC_sc AS CHAR) AS modelIC_sc,
  CAST(sc.modelID_sc AS CHAR) AS modelID_sc,
  CAST(sc.modelgt_sc AS CHAR) AS modelgt_sc,
  CAST(sc.modelgz_sc AS CHAR) AS modelgz_sc,
  CAST(kc.model70_kc AS CHAR) AS model70_kc,
  CAST(kc.model90_kc AS CHAR) AS model90_kc,
  CAST(kc.modelIC_kc AS CHAR) AS modelIC_kc,
  CAST(kc.modelID_kc AS CHAR) AS modelID_kc,
  CAST(kc.modelgt_kc AS CHAR) AS modelgt_kc,
  CAST(kc.modelgz_kc AS CHAR) AS modelgz_kc,
  CAST(pd.model70_pd AS CHAR) AS model70_pd,
  CAST(pd.model90_pd AS CHAR) AS model90_pd,
  CAST(pd.modelIC_pd AS CHAR) AS modelIC_pd,
  CAST(pd.modelID_pd AS CHAR) AS modelID_pd,
  CAST(pd.modelgt_pd AS CHAR) AS modelgt_pd,
  pd.modelgz_pd,
  pd.model_yk,
  (SELECT
    ait.temp
  FROM
    zh_asphalt_inventory_table ait,
    zh_goods_info gi
  WHERE ait.tank = zs.storage_code
    AND ait.storage_area = zs.reservoir_code
    AND ait.goods_code = gi.goods_code) AS temp
FROM
  zh_storage zs
  LEFT JOIN zh_reservoir_area zra
    ON zs.reservoir_code = zra.reservoir_code
  LEFT JOIN
    (SELECT
      zar.storage_code,
      zar.reservoir_code,
      zar.goods_model,
      (
        CASE
          WHEN zar.goods_model = &#39;70#&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS model70_rk,
      (
        CASE
          WHEN zar.goods_model = &#39;90#&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS model90_rk
    FROM
      zh_asphalt_repertory zar,
      zh_goods_info gi
    WHERE zar.goods_code = gi.goods_code
      AND zar.order_type IN (&#39;00&#39;)
      AND zar.type = &#39;00&#39;
    GROUP BY zar.storage_code,
      zar.reservoir_code,
      zar.goods_model) rk
    ON zs.reservoir_code = rk.reservoir_code
    AND zs.storage_code = rk.storage_code
  LEFT JOIN
    (SELECT
      zar.storage_code,
      zar.reservoir_code,
      zar.goods_model,
      (
        CASE
          WHEN zar.goods_model = &#39;70#&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS model70_ck,
      (
        CASE
          WHEN zar.goods_model = &#39;90#&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS model90_ck,
      (
        CASE
          WHEN zar.goods_model = &#39;I-C&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelIC_ck,
      (
        CASE
          WHEN zar.goods_model = &#39;I-D&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelID_ck,
      (
        CASE
          WHEN zar.goods_model = &#39;高弹&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelgt_ck,
      (
        CASE
          WHEN zar.goods_model = &#39;高粘&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelgz_ck
    FROM
      zh_asphalt_repertory zar,
      zh_goods_info gi
    WHERE zar.goods_code = gi.goods_code
      AND zar.order_type IN (&#39;01&#39;, &#39;02&#39;)
      AND zar.type = &#39;00&#39;
    GROUP BY zar.storage_code,
      zar.reservoir_code,
      zar.goods_model) ck
    ON zs.reservoir_code = ck.reservoir_code
    AND zs.storage_code = ck.storage_code
  LEFT JOIN
    (SELECT
      zar.storage_code,
      zar.reservoir_code,
      zar.goods_model,
      (
        CASE
          WHEN zar.goods_model = &#39;I-C&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelIC_sc,
      (
        CASE
          WHEN zar.goods_model = &#39;I-D&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelID_sc,
      (
        CASE
          WHEN zar.goods_model = &#39;高弹&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelgt_sc,
      (
        CASE
          WHEN zar.goods_model = &#39;高粘&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelgz_sc
    FROM
      zh_asphalt_repertory zar,
      zh_goods_info gi
    WHERE zar.goods_code = gi.goods_code
      AND zar.order_type IN (&#39;02&#39;)
      AND zar.type = &#39;00&#39;
    GROUP BY zar.storage_code,
      zar.reservoir_code,
      zar.goods_model) sc
    ON zs.reservoir_code = sc.reservoir_code
    AND zs.storage_code = sc.storage_code
  LEFT JOIN
    (SELECT
      zar.storage_code,
      zar.reservoir_code,
      zar.goods_model,
      (
        CASE
          WHEN zar.goods_model = &#39;70#&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS model70_kc,
      (
        CASE
          WHEN zar.goods_model = &#39;90#&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS model90_kc,
      (
        CASE
          WHEN zar.goods_model = &#39;I-C&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelIC_kc,
      (
        CASE
          WHEN zar.goods_model = &#39;I-D&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelID_kc,
      (
        CASE
          WHEN zar.goods_model = &#39;高弹&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelgt_kc,
      (
        CASE
          WHEN zar.goods_model = &#39;高粘&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelgz_kc
    FROM
      zh_asphalt_repertory zar,
      zh_goods_info gi
    WHERE zar.goods_code = gi.goods_code
      AND zar.order_type IN (&#39;00&#39;, &#39;01&#39;, &#39;02&#39;)
      AND zar.type = &#39;00&#39;
    GROUP BY zar.storage_code,
      zar.reservoir_code,
      zar.goods_model) kc
    ON zs.reservoir_code = kc.reservoir_code
    AND zs.storage_code = kc.storage_code
  LEFT JOIN
    (SELECT
      zar.storage_code,
      zar.reservoir_code,
      zar.goods_model,
      SUM(zar.goods_count) AS model_yk,
      (
        CASE
          WHEN zar.goods_model = &#39;70#&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS model70_pd,
      (
        CASE
          WHEN zar.goods_model = &#39;90#&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS model90_pd,
      (
        CASE
          WHEN zar.goods_model = &#39;I-C&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelIC_pd,
      (
        CASE
          WHEN zar.goods_model = &#39;I-D&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelID_pd,
      (
        CASE
          WHEN zar.goods_model = &#39;高弹&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelgt_pd,
      (
        CASE
          WHEN zar.goods_model = &#39;高粘&#39;
          THEN SUM(zar.goods_count)
          ELSE &#39;&#39;
        END
      ) AS modelgz_pd
    FROM
      zh_asphalt_repertory zar,
      zh_goods_info gi
    WHERE zar.goods_code = gi.goods_code
      AND zar.order_type IN (&#39;05&#39;)
      AND zar.type = &#39;00&#39;
    GROUP BY zar.storage_code,
      zar.reservoir_code,
      zar.goods_model) pd
    ON zs.reservoir_code = pd.reservoir_code
    AND zs.storage_code = pd.storage_code
WHERE 1 = 1
GROUP BY zs.storage_code,
  zs.reservoir_code
ORDER BY zra.abbreviation DESC&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;WHERE zs.storage_code = &#39;TKH-03&#39;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;00入库单
01出库单
02生产单
03结余调整单
04倒灌单
05盘点单号&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;库区  名称  入库的型号(70 90等)
  储罐 罐号 库容&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&#34; SELECT&#34;&lt;br&gt;
&#34;  zar.reservoir_code,&#34;&lt;br&gt;
&#34;  zar.storage_code,&#34;&lt;br&gt;
&#34;  zar.goods_model,&#34;&lt;br&gt;
&#34;  zar.order_type&#34;&lt;br&gt;
&#34; FROM&#34;&lt;br&gt;
&#34;  zh_asphalt_repertory zar&#34;;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SELECT  zar.reservoir_code,  zar.storage_code,  zar.goods_model,  zar.order_typeFROM  zh_asphalt_repertory zar&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;{title:&#39;入库数量（吨）&#39;,colspan:2},
{title:&#39;出库数量（吨）&#39;,colspan:6},
{title:&#39;生产数量（吨）&#39;,colspan:4},
{title:&#39;库存数量（吨）&#39;,colspan:6},
{title:&#39;盘点数量（吨）&#39;,colspan:6},&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&#34; SELECT &#34;&lt;br&gt;
&#34;   *&#34;&lt;br&gt;
&#34; FROM&#34;&lt;br&gt;
&#34;   zh_asphalt_repertory zar&#34;&lt;br&gt;
&#34; GROUP BY zar.reservoir_code,zar.storage_code&#34;&lt;br&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&#34; SELECT *&#34;+
&#34; FROM zh_asphalt_repertory zar&#34;+
&#34; WHERE zar.reservoir_code = &#39;001&#39;&#34;+
&#34; AND zar.storage_code = &#39;T1003&#39;&#34;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;{id=18b0cef136694001a0849fcb1cee3a7f, reservoirCode=002, orderNo=20170222-A, orderType=00, occurDate=Wed Feb 22 00:00:00 CST 2017, storageCode=TKH-07, goodsCount=500.0000, goodsCode=077, type=00, createDate=Wed Feb 22 16:03:12 CST 2017, goodsModel=70, goodsBatch=, model70rk=500.0000}&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;SELECT
  *,
  (SELECT
    zra.abbreviation
  FROM
    zh_reservoir_area zra
  WHERE zra.reservoir_code = zar.reservoir_code) AS abbreviation,
  (SELECT
    zs.storage_capacity
  FROM
    zh_storage zs
  WHERE zs.reservoir_code = zar.reservoir_code
    AND zs.storage_code = zar.storage_code) AS storage_capacity
FROM
  zh_asphalt_repertory zar
GROUP BY zar.reservoir_code,
  zar.storage_code&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;HAVING 1=1
AND zar.reservoir_code = &#39;001&#39;
AND zar.storage_code = &#39;T1003&#39;
AND zar.occur_date = &#39;2017-01-17&#39;
ORDER BY abbreviation&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;LIMIT 0, 10&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;周凯(男) 29岁 洛阳师范-生物技术 本科生 现在北京金兆路华电子商务担任Java开发工程师&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;工作经验:
2013-2014 地点:郑州  OA,ERP系统开发
2015-~    地点:北京   电商系统开发&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;喜欢全栈&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;电商系统开发:
  二次开发系统,搜索模块由Lucene迁移到ElasticSearch
  同步Mysql数据到ElasticSearch
  ElasticSearch权重设计&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;服务器部署:
  CoreOS+Docker
  Rancher
  Jenkins+Ansible+Docker
  实现自动化部署&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;喜欢研究技术
希望通过Leader课程,系统的学习&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&#34; SELECT zas.category&#34;+
&#34; FROM zh_asphalt_storage zas&#34;+
&#34; GROUP BY zas.category&#34;+
&#34; HAVING zas.category IS NOT NULL&#34;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&#34; SELECT *&#34;+
&#34; FROM zh_asphalt_storage zas&#34;+
&#34; WHERE zas.category = &#39;01&#39;&#34;+
&#34; GROUP BY zas.model&#34;;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;literalblock&#34;&gt;
&lt;div class=&#34;content&#34;&gt;
&lt;pre&gt;String categorySql =
        &#34; SELECT *&#34;+
        &#34; FROM zh_asphalt_storage zas&#34;+
        &#34; WHERE zas.category = &#39;01&#39;&#34;+
        &#34; GROUP BY zas.model&#34;;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;AsphaltStorageServiceImpl&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;&#34; SELECT &#34;+
&#34;   *,&#34;+
&#34;   zas.instruct_type,&#34;+
&#34;   zas.Net_profit_loss,&#34;+
&#34;   zas.Storage_area,&#34;+
&#34;   DATE_FORMAT(zas.in_date, &#39;%Y-%m-%d&#39;) AS dat,&#34;+
&#34;   (SELECT &#34;+
&#34;     SUM(zasc.goods_count) &#34;+
&#34;   FROM&#34;+
&#34;     zh_asphalt_storage_count zasc &#34;+
&#34;   WHERE zasc.asphalt_number = zas.asphalt_number) AS goods_count,&#34;+
&#34;   (SELECT &#34;+
&#34;     zra.abbreviation &#34;+
&#34;   FROM&#34;+
&#34;     zh_reservoir_area zra &#34;+
&#34;   WHERE zra.reservoir_code = zas.Storage_area) AS abbreviation &#34;+
&#34; FROM&#34;+
&#34;   zh_asphalt_storage zas &#34;+
&#34; ORDER BY zas.in_date DESC&#34;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title></title>
      <link>/tmp/wuliuxiugai/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/tmp/wuliuxiugai/</guid>
      <description>&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ALTER TABLE &lt;code&gt;zh_sub_plan_launch&lt;/code&gt; ADD COLUMN &lt;code&gt;reservoir_code&lt;/code&gt; VARCHAR(255) NULL COMMENT &#39;所属库区&#39; AFTER &lt;code&gt;create_date&lt;/code&gt;;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ALTER TABLE &lt;code&gt;zh_sub_plan&lt;/code&gt; ADD COLUMN &lt;code&gt;reservoir_code&lt;/code&gt; VARCHAR(255) NULL COMMENT &#39;所属库区&#39; AFTER &lt;code&gt;create_date&lt;/code&gt;;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ALTER TABLE &lt;code&gt;zh_plan_launch&lt;/code&gt; ADD COLUMN &lt;code&gt;user_id&lt;/code&gt; VARCHAR(50) NULL COMMENT &#39;登录人&#39; AFTER &lt;code&gt;plan_memo&lt;/code&gt;;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ALTER TABLE &lt;code&gt;zh_plan&lt;/code&gt; CHANGE &lt;code&gt;table_date&lt;/code&gt; &lt;code&gt;table_date&lt;/code&gt; DATETIME NULL, CHANGE &lt;code&gt;release_time&lt;/code&gt; &lt;code&gt;release_time&lt;/code&gt; DATETIME NULL, CHANGE &lt;code&gt;check_time&lt;/code&gt; &lt;code&gt;check_time&lt;/code&gt; DATETIME NULL, CHANGE &lt;code&gt;change_date&lt;/code&gt; &lt;code&gt;change_date&lt;/code&gt; DATETIME NULL COMMENT &#39;变更时间&#39;;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ALTER TABLE &lt;code&gt;zh_sub_plan&lt;/code&gt; CHANGE &lt;code&gt;plan_date&lt;/code&gt; &lt;code&gt;plan_date&lt;/code&gt; DATE NULL;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ALTER TABLE &lt;code&gt;zh_plan&lt;/code&gt; ADD COLUMN &lt;code&gt;user_id&lt;/code&gt; VARCHAR(20) NULL COMMENT &#39;登陆人&#39; AFTER &lt;code&gt;plan_memo&lt;/code&gt;;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;paragraph&#34;&gt;
&lt;p&gt;ALTER TABLE &lt;code&gt;wuliu2&lt;/code&gt;.&lt;code&gt;zh_asphalt_storage&lt;/code&gt; ADD COLUMN &lt;code&gt;category&lt;/code&gt; VARCHAR(50) NULL COMMENT &#39;类目&#39; AFTER &lt;code&gt;Name_commodity&lt;/code&gt;;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>